{% extends 'api_base.html' %}
{% block title %}TASK - {{ taskname }} - {{ apiname }} {% endblock %}
{% block page-title %}
<a class="active" style="color: #1e71df" href="/api_test/automation">自动化测试</a>
<svg t="1635085520789" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="165732" width="200" height="200"><path d="M360.704 280.746667l45.226667-45.226667 246.570666 246.528a42.666667 42.666667 0 0 1 0 60.330667l-246.528 246.570666-45.22666601-45.269333 231.42400001-231.466667-231.466667-231.424z" p-id="165733"></path></svg>
<a class="active" style="color: #1e71df" href="/api_test/automation/{{ taskname }}">{{ taskname }}</a>
<svg t="1635085520789" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="165732" width="200" height="200"><path d="M360.704 280.746667l45.226667-45.226667 246.570666 246.528a42.666667 42.666667 0 0 1 0 60.330667l-246.528 246.570666-45.22666601-45.269333 231.42400001-231.466667-231.466667-231.424z" p-id="165733"></path></svg>
{{ apiname }}
<svg t="1635085520789" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="165732" width="200" height="200"><path d="M360.704 280.746667l45.226667-45.226667 246.570666 246.528a42.666667 42.666667 0 0 1 0 60.330667l-246.528 246.570666-45.22666601-45.269333 231.42400001-231.466667-231.466667-231.424z" p-id="165733"></path></svg>
{{ casename }}
{% endblock %}

{% block api_tab %}
<li class="nav-item">
    <a href="#" onclick="tab_click('post')" class="nav-link" data-bs-toggle="tab"><!-- Download SVG icon from http://tabler-icons.io/i/home -->
        <svg xmlns="http://www.w3.org/2000/svg" class="icon me-2" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="12" cy="7" r="4" /><path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" /></svg>
        手工测试
    </a>
</li>
<li class="nav-item">
    <a href="#" onclick="tab_click('automation')" class="nav-link active" data-bs-toggle="tab"><!-- Download SVG icon from http://tabler-icons.io/i/user -->
        <svg t="1636172939547" class="icon me-2" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4269" width="200" height="200"><path d="M212.704 410.208l-13.76-14.88-109.696 101.472 108.064 96.192 13.504-15.104-91.36-81.376zM535.904 410.208l13.856-14.88 109.6 101.472-108.032 96.192-13.44-15.104 91.328-81.376z" p-id="4270"></path><path d="M551.2 596.384l-16.704-18.688 91.2-81.216-93.12-86.112 17.056-18.432 113.376 104.928-1.984 1.76zM197.504 596.384l-1.792-1.6-110.048-97.952 1.952-1.792 111.424-103.136 17.056 18.432-93.088 86.112 91.168 81.216-16.672 18.72z m-104.672-99.616l104.288 92.832 10.304-11.52-91.552-81.504 1.952-1.792 91.488-84.64-10.528-11.424-105.952 98.048z" p-id="4271"></path><path d="M50.368 274.24h913.344v-20.288H50.368z" p-id="4272"></path><path d="M966.112 276.64H47.968V251.52h918.144v25.12z m-913.344-4.8h908.544v-15.488H52.768v15.488z" p-id="4273"></path><path d="M121.376 193.056h20.288v20.32h-20.288z" p-id="4274"></path><path d="M144.064 215.776h-25.088v-25.12h25.088v25.12z m-20.256-4.832h15.456v-15.488h-15.456v15.488z" p-id="4275"></path><path d="M202.592 193.056h20.288v20.32h-20.288z" p-id="4276"></path><path d="M225.28 215.776h-25.12v-25.12h25.12v25.12z m-20.288-4.832h15.488v-15.488h-15.488v15.488z" p-id="4277"></path><path d="M283.744 193.056h20.288v20.32h-20.288z" p-id="4278"></path><path d="M306.432 215.776h-25.088v-25.12h25.088v25.12z m-20.288-4.832h15.456v-15.488h-15.456v15.488z" p-id="4279"></path><path d="M60.48 883.136V152.448H953.6v552.032c1.408-0.16 2.72-0.48 4.288-0.48 5.92 0 11.072 0.992 16 2.336V132.16H40.192v771.2h598.176a59.776 59.776 0 0 1-11.008-20.32H60.48v0.096z" p-id="4280"></path><path d="M643.488 905.824H37.792V129.76h938.496v579.776l-3.04-0.768a56.448 56.448 0 0 0-15.36-2.208 15.744 15.744 0 0 0-2.56 0.256l-4.128 0.544V154.848H62.88v725.856h566.272l0.544 1.728c2.304 7.328 5.888 13.92 10.528 19.456l3.264 3.936z m-600.864-4.832h590.88a59.264 59.264 0 0 1-7.84-15.488H58.08V150.048h897.92v551.776c4.576-0.48 9.952 0.256 15.424 1.504V134.592H42.624v766.4z" p-id="4281"></path><path d="M458.144 367.36l-152.32 263.648-17.6-10.176 152.288-263.648z" p-id="4282"></path><path d="M306.688 634.24l-21.76-12.576 1.216-2.016 153.504-265.728 21.76 12.576z" p-id="4283"></path><path d="M578.016 814.592c0.064 0.032 0.064 0.096 0.128 0.096-0.032 0.064-0.096 0.032-0.128-0.096z" p-id="4284"></path><path d="M841.056 980.928l-3.328-0.192a50.752 50.752 0 0 1-32.544-13.568l-4.768-5.408c-4.288-7.328-18.496-15.2-29.92-15.2a23.392 23.392 0 0 0-20.096 12.128l-3.936 5.632c-18.304 17.312-37.6 20.096-57.792 10.464l-52.768-30.624a48.096 48.096 0 0 1-15.008-56.448c1.568-3.936 2.56-8.32 2.688-12.16 0-16.48-12.416-30.72-28.128-29.984a35.52 35.52 0 0 1-32.704-18.912c-0.64-1.12-1.472-3.072-1.984-4.256l-0.096-0.192-6.528-14.784a223.68 223.68 0 0 1-0.096-90.336c4.48-24.032 19.616-38.56 40.48-38.56 15.168-0.064 27.616-13.568 27.648-29.44a38.944 38.944 0 0 0-2.688-12.576 48.448 48.448 0 0 1 15.712-57.152l3.52-2.304 55.456-31.2c6.56-1.92 11.424-2.56 15.584-2.56 13.6 0 25.76 4.704 34.976 13.312l4.448 4.768c15.2 24.032 45.344 8.96 49.056 3.04l4.32-5.728c18.56-16.608 37.984-18.048 56.992-9.28l52.832 30.784c17.44 13.312 23.424 36.896 15.2 56.704a41.664 41.664 0 0 0-2.752 12.384c0.032 10.4 2.368 29.376 18.144 29.376h3.712c20.832 0 36.512 14.688 40.864 38.304 6.144 29.344 6.176 60.64 0.064 90.08-4.512 23.744-20.192 38.688-40.864 38.688-16.352 0-18.08 20.672-18.08 29.568 0.224 4.224 1.088 8.64 2.72 12.672 8.384 20.416 1.92 43.968-15.84 57.088l-3.392 2.24-52.736 29.92a47.776 47.776 0 0 1-18.368 3.712z m-70.528-66.336c21.76 0 46.976 12.896 56.192 28.736a18.72 18.72 0 0 0 12.864 5.472l1.472 16.128v-16a18.816 18.816 0 0 0 5.568-0.864l49.76-28.48a16.32 16.32 0 0 0 5.44-19.52 72.224 72.224 0 0 1-4.992-23.904c-0.032-37.568 20.096-62.304 50.048-62.304 5.824 0 8.384-7.04 9.504-12.928a191.808 191.808 0 0 0-0.064-77.664c-1.568-8.416-4.736-12.512-9.504-12.512h-3.712c-30.432 0-50.112-24.448-50.112-62.272 0.448-8.448 2.176-16.256 5.056-23.488 2.784-6.72 0.928-14.784-4.128-18.656l-48.992-28.448a15.392 15.392 0 0 0-6.688-1.504h-0.032a18.048 18.048 0 0 0-12.288 4.576c-10.496 16.608-36.32 26.144-55.488 26.144a55.36 55.36 0 0 1-46.784-26.368 18.176 18.176 0 0 0-12.992-5.344h-0.032a19.616 19.616 0 0 0-5.12 0.608l-50.848 28.96a16.544 16.544 0 0 0-5.408 19.584c2.944 7.328 4.64 15.328 4.992 23.904 0 34.432-26.528 61.984-59.072 62.144-2.56-0.064-7.296 0.032-9.664 12.736a192.128 192.128 0 0 0 0.064 77.728l0.448 1.152c0.928 1.44 1.728 2.688 2.336 3.744l2.016 4.16-2.336 18.528 4.896-15.232a62.112 62.112 0 0 1 62.688 62.784c-0.32 8.128-2.016 16.032-5.024 23.552-2.752 6.624-0.896 14.688 4.128 18.496l48.864 28.224a14.816 14.816 0 0 0 6.688 1.536 17.824 17.824 0 0 0 12.16-4.896c10.432-17.792 28.736-28.512 48.096-28.512z" p-id="4285"></path><path d="M775.584 894.688a132.608 132.608 0 0 1-132.512-132.448c0-73.088 59.424-132.576 132.512-132.576s132.544 59.456 132.544 132.576a132.64 132.64 0 0 1-132.544 132.448z m0-232.992a100.672 100.672 0 0 0-100.512 100.576 100.608 100.608 0 0 0 100.512 100.448 100.608 100.608 0 0 0 100.544-100.448 100.672 100.672 0 0 0-100.544-100.576z" p-id="4286"></path></svg>
        自动化测试
    </a>
</li>
<li class="nav-item">
    <a href="#" onclick="tab_click('stress')" class="nav-link" data-bs-toggle="tab"><!-- Download SVG icon from http://tabler-icons.io/i/user -->
        <svg t="1636371462410" class="icon me-2" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2741" width="200" height="200"><path d="M461.223546 894.876154c-1.062192 0-2.099824-0.048095-3.162016-0.193405-11.732206-1.497097-20.736277-11.103896-21.532409-22.884197l-40.336684-605.249801L287.129486 630.065999c-3.186576 10.670014-14.097066 17.911952-24.260543 17.621333-11.128455-0.2415-20.711717-7.91732-23.390733-18.732643l-38.864146-155.385976-68.000743 68.000743c-4.634554 4.634554-10.911514 7.241938-17.477047 7.241938L65.698305 548.811394l0-49.437969 39.20286 0 91.634-91.634c6.300496-6.300496 15.425318-8.810666 24.067138-6.348592 8.593725 2.38942 15.231913 9.197476 17.380856 17.839297l27.6395 110.48637 122.460076-408.222425c3.451612-11.466146 14.677281-18.732643 26.456558-17.477047 11.876492 1.351787 21.097504 11.007705 21.894659 22.932292l41.061185 616.136755 108.555391-325.68971c3.186576-9.487072 11.732206-16.125259 21.725814-16.825201 10.041704-0.627287 19.408025 4.634554 23.850198 13.59053l76.763314 153.526629 27.326369-54.651714c4.200672-8.376785 12.745279-13.663184 22.1116-13.663184l197.750853 0 0 49.437969L773.08225 548.811394l-42.581818 85.212754c-8.400321 16.70445-35.82288 16.70445-44.223201 0l-72.176856-144.378272L484.638839 877.978299C481.259882 888.165312 471.724715 894.876154 461.223546 894.876154z" p-id="2742"></path></svg>
        压力测试
    </a>
</li>
{% endblock %}

{% block api_tab_content %}
<div class="tab-pane active">
    <div class="row mb-3">
        <div class="col-auto">
            <a href="#" class="btn btn-default" data-bs-toggle="modal" data-bs-target="#modal-new-case">
                <svg t="1638003419490" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="101642" width="200" height="200"><path d="M0 0m512 0l0 0q512 0 512 512l0 0q0 512-512 512l0 0q-512 0-512-512l0 0q0-512 512-512Z" fill="#517EFF" p-id="101643"></path><path d="M704 448a64 64 0 0 1 7.488 127.552L704 576H320a64 64 0 0 1-7.488-127.552L320 448h384z" fill="#FFFFFF" p-id="101644"></path><path d="M512 256a64 64 0 0 1 63.552 56.512L576 320v384a64 64 0 0 1-127.552 7.488L448 704V320a64 64 0 0 1 64-64z" fill="#FFFFFF" p-id="101645"></path></svg>
                用例
            </a>
            <a href="#" class="btn btn-default" style="margin-left: 10px">
                <svg t="1638011236280" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="180824" width="200" height="200"><path d="M799.5904 927.232H232.448c-62.0544 0-112.3328-50.7392-112.3328-113.408V206.592c0-62.6176 50.2784-113.408 112.3328-113.408h485.4784c9.4208 0 18.432 3.7376 25.1392 10.3936l158.1056 156.672a36.4544 36.4544 0 0 1 10.752 25.856v527.7184c0 62.6176-50.2784 113.408-112.3328 113.408z" fill="#FFAC3E" p-id="180825"></path><path d="M620.3392 450.816H411.6992c-54.7328 0-99.1232-44.3904-99.1232-99.1232V93.184h406.8864v258.4576c0 54.784-44.3904 99.1744-99.1232 99.1744z" fill="#FF7C0E" p-id="180826"></path><path d="M602.9312 361.6256H490.3936c-22.6304 0-40.96-18.3296-40.96-40.96s18.3296-40.96 40.96-40.96h112.5888c22.6304 0 40.96 18.3296 40.96 40.96s-18.3808 40.96-41.0112 40.96z" fill="#FFFFFF" p-id="180827"></path></svg>
                保存
            </a>
            <a onclick="del_case('{{ casename }}')" href="#" class="btn btn-default" style="margin-left: 10px" data-bs-toggle="modal" data-bs-target="#modal-danger">
                <svg t="1635400029781" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="17941" width="200" height="200"><path d="M877.79 217.23H624.22c0-36.02-29.2-65.23-65.23-65.23H465c-36.02 0-65.23 29.2-65.23 65.23H146.21c-18.01 0-32.61 14.6-32.61 32.61 0 18.01 14.6 32.61 32.61 32.61h49.75l14.43 528.79c1.06 33.91 25.21 60.76 54.64 60.76h493.93c29.43 0 53.58-26.86 54.64-60.76l14.48-528.79h49.7c18.01 0 32.61-14.6 32.61-32.61 0.01-18.01-14.59-32.61-32.6-32.61zM364.24 748.41c-17.98 0.82-33.4-10.01-34.44-24.19L308 427.56c-1.04-14.18 12.69-26.34 30.67-27.16 17.98-0.82 33.4 10.01 34.45 24.19l21.8 296.67c1.04 14.17-12.7 26.33-30.68 27.15z m180.37-25.42c0 14.2-14.6 25.72-32.61 25.72-18.01 0-32.61-11.51-32.61-25.72V425.83c0-14.2 14.6-25.72 32.61-25.72 18.01 0 32.61 11.51 32.61 25.72v297.16zM716 427.56l-21.8 296.67c-1.04 14.18-16.46 25.01-34.44 24.19-17.98-0.82-31.71-12.98-30.67-27.16l21.8-296.67c1.04-14.18 16.46-25.01 34.44-24.19 17.98 0.82 31.72 12.98 30.67 27.16z" fill="#FF5D5D" p-id="17942"></path></svg>
                删除
            </a>
        </div>
    </div>

    <div class="dropdown-divider"></div>

    {% if case_num > 0 %}
    <div class="btn-group mt-2">
        {% for case in cases %}
        {% if case.casename == casename %}
        <a type="button" class="btn btn-primary" href="/api_test/automation/{{ taskname }}/{{ apiname }}/{{ case.casename }}">{{ case.casename }}</a>
        {% else %}
        <a type="button" class="btn" href="/api_test/automation/{{ taskname }}/{{ apiname }}/{{ case.casename }}">{{ case.casename }}</a>
        {% endif %}
        {% endfor %}
    </div>

    {% if case_type == 'Json' %}
    <div class="accordion mt-3">
        <div class="accordion-item">
            <h2 class="accordion-header" id="heading-1">
                <div class="accordion-button " type="button" data-bs-toggle="collapse" data-bs-target="#collapse-1" aria-expanded="true">
                    用例内容
                </div>
            </h2>
            <div id="collapse-1" class="accordion-collapse collapse show">
                <div class="accordion-body pt-2">
                    <div id="request_editor"></div>
                    <div class="row mt-3 mb-3">
                        <div class="col-auto">
                            <a href="#" class="btn btn-default add-assert">
                                <svg t="1638003419490" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="101642" width="200" height="200"><path d="M0 0m512 0l0 0q512 0 512 512l0 0q0 512-512 512l0 0q-512 0-512-512l0 0q0-512 512-512Z" fill="#517EFF" p-id="101643"></path><path d="M704 448a64 64 0 0 1 7.488 127.552L704 576H320a64 64 0 0 1-7.488-127.552L320 448h384z" fill="#FFFFFF" p-id="101644"></path><path d="M512 256a64 64 0 0 1 63.552 56.512L576 320v384a64 64 0 0 1-127.552 7.488L448 704V320a64 64 0 0 1 64-64z" fill="#FFFFFF" p-id="101645"></path></svg>
                                断言
                            </a>
                            <a href="#" class="btn btn-default" style="margin-left: 10px">
                                <svg t="1635400029781" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="17941" width="200" height="200"><path d="M877.79 217.23H624.22c0-36.02-29.2-65.23-65.23-65.23H465c-36.02 0-65.23 29.2-65.23 65.23H146.21c-18.01 0-32.61 14.6-32.61 32.61 0 18.01 14.6 32.61 32.61 32.61h49.75l14.43 528.79c1.06 33.91 25.21 60.76 54.64 60.76h493.93c29.43 0 53.58-26.86 54.64-60.76l14.48-528.79h49.7c18.01 0 32.61-14.6 32.61-32.61 0.01-18.01-14.59-32.61-32.6-32.61zM364.24 748.41c-17.98 0.82-33.4-10.01-34.44-24.19L308 427.56c-1.04-14.18 12.69-26.34 30.67-27.16 17.98-0.82 33.4 10.01 34.45 24.19l21.8 296.67c1.04 14.17-12.7 26.33-30.68 27.15z m180.37-25.42c0 14.2-14.6 25.72-32.61 25.72-18.01 0-32.61-11.51-32.61-25.72V425.83c0-14.2 14.6-25.72 32.61-25.72 18.01 0 32.61 11.51 32.61 25.72v297.16zM716 427.56l-21.8 296.67c-1.04 14.18-16.46 25.01-34.44 24.19-17.98-0.82-31.71-12.98-30.67-27.16l21.8-296.67c1.04-14.18 16.46-25.01 34.44-24.19 17.98 0.82 31.72 12.98 30.67 27.16z" fill="#FF5D5D" p-id="17942"></path></svg>
                                全部删除
                            </a>
                        </div>
                    </div>
                    <div class="assert-form">
                        <div class="row">
                            <div class="input-group" style="width: 300px">
                                <span class="input-group-text">
                                    校验参数
                                </span>
                                <input disabled type="text" class="form-control"  placeholder="请输入参数"  autocomplete="off" value="code">
                            </div>
                            <div class="input-group" style="width: 300px">
                                <div class="input-group-text">断言类型</div>
                                <select disabled class="select2-selection--single" data-placeholder="请选择断言类型">
                                    <option>==</option>
                                    <option>!=</option>
                                    <option>></option>
                                    <option><</option>
                                </select>
                            </div>
                            <div class="input-group" style="width: 300px">
                                <span class="input-group-text">
                                    预期值
                                </span>
                                <input disabled type="text" class="form-control"  placeholder="请输入预期值"  autocomplete="off" value="200">
                            </div>
                            <div class="col-auto">
                                <a href="#" class="btn btn-default">
                                    <svg t="1638010895757" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="175517" width="200" height="200"><path d="M512 512m-506 0a506 506 0 1 0 1012 0 506 506 0 1 0-1012 0Z" fill="#90DFAA" p-id="175518"></path><path d="M198.4 195.8h627.4v461.2H198.4z" fill="#324A5E" p-id="175519"></path><path d="M256.2 246H768v360.6H256.2z" fill="#E6E9EE" p-id="175520"></path><path d="M512 320.2c-58.6 0-106.2 47.6-106.2 106.2s47.6 106.2 106.2 106.2 106.2-47.6 106.2-106.2-47.6-106.2-106.2-106.2z" fill="#F1543F" p-id="175521"></path><path d="M477.4 359.4v135.4l99-67.6z" fill="#FFFFFF" p-id="175522"></path><path d="M198.4 747.2h627.4v68H198.4z" fill="#E6E9EE" p-id="175523"></path><path d="M198.4 747.2H448v68H198.4z" fill="#FF7058" p-id="175524"></path><path d="M276.4 781.2m-47 0a47 47 0 1 0 94 0 47 47 0 1 0-94 0Z" fill="#324A5E" p-id="175525"></path></svg>
                                    调试
                                </a>
                            </div>
                        </div>
                        {% for case_assert in case_asserts%}
                        <div class="row case-assert mt-3">
                            <div class="input-group" style="width: 300px">
                                <span class="input-group-text">
                                    校验参数
                                </span>
                                <input type="text" class="form-control"  placeholder="请输入参数"  autocomplete="off" value="{{ case_assert.parameter }}">
                            </div>
                            <div class="input-group" style="width: 300px">
                                <div class="input-group-text">断言类型</div>
                                <select  class="select2-selection--single" data-placeholder="请选择断言类型">
                                    <option>==</option>
                                    <option>!=</option>
                                    <option>></option>
                                    <option><</option>
                                </select>
                            </div>
                            <div class="input-group" style="width: 300px">
                                <span class="input-group-text">
                                    预期值
                                </span>
                                <input  type="text" class="form-control"  placeholder="请输入预期值"  autocomplete="off" value="{{ case_assert.value }}">
                            </div>
                            <div class="col-auto">
                                <a href="#" class="btn btn-default">
                                    <svg t="1638010895757" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="175517" width="200" height="200"><path d="M512 512m-506 0a506 506 0 1 0 1012 0 506 506 0 1 0-1012 0Z" fill="#90DFAA" p-id="175518"></path><path d="M198.4 195.8h627.4v461.2H198.4z" fill="#324A5E" p-id="175519"></path><path d="M256.2 246H768v360.6H256.2z" fill="#E6E9EE" p-id="175520"></path><path d="M512 320.2c-58.6 0-106.2 47.6-106.2 106.2s47.6 106.2 106.2 106.2 106.2-47.6 106.2-106.2-47.6-106.2-106.2-106.2z" fill="#F1543F" p-id="175521"></path><path d="M477.4 359.4v135.4l99-67.6z" fill="#FFFFFF" p-id="175522"></path><path d="M198.4 747.2h627.4v68H198.4z" fill="#E6E9EE" p-id="175523"></path><path d="M198.4 747.2H448v68H198.4z" fill="#FF7058" p-id="175524"></path><path d="M276.4 781.2m-47 0a47 47 0 1 0 94 0 47 47 0 1 0-94 0Z" fill="#324A5E" p-id="175525"></path></svg>
                                    调试
                                </a>
                                <a href="#" class="btn btn-default remove-assert" style="margin-left: 10px">
                                    <svg t="1635400029781" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="17941" width="200" height="200"><path d="M877.79 217.23H624.22c0-36.02-29.2-65.23-65.23-65.23H465c-36.02 0-65.23 29.2-65.23 65.23H146.21c-18.01 0-32.61 14.6-32.61 32.61 0 18.01 14.6 32.61 32.61 32.61h49.75l14.43 528.79c1.06 33.91 25.21 60.76 54.64 60.76h493.93c29.43 0 53.58-26.86 54.64-60.76l14.48-528.79h49.7c18.01 0 32.61-14.6 32.61-32.61 0.01-18.01-14.59-32.61-32.6-32.61zM364.24 748.41c-17.98 0.82-33.4-10.01-34.44-24.19L308 427.56c-1.04-14.18 12.69-26.34 30.67-27.16 17.98-0.82 33.4 10.01 34.45 24.19l21.8 296.67c1.04 14.17-12.7 26.33-30.68 27.15z m180.37-25.42c0 14.2-14.6 25.72-32.61 25.72-18.01 0-32.61-11.51-32.61-25.72V425.83c0-14.2 14.6-25.72 32.61-25.72 18.01 0 32.61 11.51 32.61 25.72v297.16zM716 427.56l-21.8 296.67c-1.04 14.18-16.46 25.01-34.44 24.19-17.98-0.82-31.71-12.98-30.67-27.16l21.8-296.67c1.04-14.18 16.46-25.01 34.44-24.19 17.98 0.82 31.72 12.98 30.67 27.16z" fill="#FF5D5D" p-id="17942"></path></svg>
                                    删除
                                </a>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% elif case_type == 'Get' %}
    <div class="accordion mt-3">
        <div class="accordion-item">
            <h2 class="accordion-header" id="heading-2">
                <div class="accordion-button " type="button" data-bs-toggle="collapse" data-bs-target="#collapse-2" aria-expanded="true">
                    用例内容
                </div>
            </h2>
            <div id="collapse-2" class="accordion-collapse collapse show">
                <div class="accordion-body pt-2">
                    <textarea class="form-control" name="example-textarea-input" rows="3" placeholder="Content..">user=elver&age=18</textarea>
                    <div class="row mt-3 mb-3">
                        <div class="col-auto">
                            <a href="#" class="btn btn-default add-assert" id="add-assert">
                                <svg t="1638003419490" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="101642" width="200" height="200"><path d="M0 0m512 0l0 0q512 0 512 512l0 0q0 512-512 512l0 0q-512 0-512-512l0 0q0-512 512-512Z" fill="#517EFF" p-id="101643"></path><path d="M704 448a64 64 0 0 1 7.488 127.552L704 576H320a64 64 0 0 1-7.488-127.552L320 448h384z" fill="#FFFFFF" p-id="101644"></path><path d="M512 256a64 64 0 0 1 63.552 56.512L576 320v384a64 64 0 0 1-127.552 7.488L448 704V320a64 64 0 0 1 64-64z" fill="#FFFFFF" p-id="101645"></path></svg>
                                断言
                            </a>
                            <a href="#" class="btn btn-default" style="margin-left: 10px">
                                <svg t="1635400029781" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="17941" width="200" height="200"><path d="M877.79 217.23H624.22c0-36.02-29.2-65.23-65.23-65.23H465c-36.02 0-65.23 29.2-65.23 65.23H146.21c-18.01 0-32.61 14.6-32.61 32.61 0 18.01 14.6 32.61 32.61 32.61h49.75l14.43 528.79c1.06 33.91 25.21 60.76 54.64 60.76h493.93c29.43 0 53.58-26.86 54.64-60.76l14.48-528.79h49.7c18.01 0 32.61-14.6 32.61-32.61 0.01-18.01-14.59-32.61-32.6-32.61zM364.24 748.41c-17.98 0.82-33.4-10.01-34.44-24.19L308 427.56c-1.04-14.18 12.69-26.34 30.67-27.16 17.98-0.82 33.4 10.01 34.45 24.19l21.8 296.67c1.04 14.17-12.7 26.33-30.68 27.15z m180.37-25.42c0 14.2-14.6 25.72-32.61 25.72-18.01 0-32.61-11.51-32.61-25.72V425.83c0-14.2 14.6-25.72 32.61-25.72 18.01 0 32.61 11.51 32.61 25.72v297.16zM716 427.56l-21.8 296.67c-1.04 14.18-16.46 25.01-34.44 24.19-17.98-0.82-31.71-12.98-30.67-27.16l21.8-296.67c1.04-14.18 16.46-25.01 34.44-24.19 17.98 0.82 31.72 12.98 30.67 27.16z" fill="#FF5D5D" p-id="17942"></path></svg>
                                全部删除
                            </a>
                        </div>
                    </div>
                    <div class="assert-form">
                        <div class="row">
                            <div class="input-group" style="width: 300px">
                                <span class="input-group-text">
                                    校验参数
                                </span>
                                <input disabled type="text" class="form-control"  placeholder="请输入参数"  autocomplete="off" value="code">
                            </div>
                            <div class="input-group" style="width: 300px">
                                <div class="input-group-text">断言类型</div>
                                <select disabled class="select2-selection--single" data-placeholder="请选择断言类型">
                                    <option>==</option>
                                    <option>!=</option>
                                    <option>></option>
                                    <option><</option>
                                </select>
                            </div>
                            <div class="input-group" style="width: 300px">
                                <span class="input-group-text">
                                    预期值
                                </span>
                                <input disabled type="text" class="form-control"  placeholder="请输入预期值"  autocomplete="off" value="200">
                            </div>
                            <div class="col-auto">
                                <a href="#" class="btn btn-default">
                                    <svg t="1638010895757" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="175517" width="200" height="200"><path d="M512 512m-506 0a506 506 0 1 0 1012 0 506 506 0 1 0-1012 0Z" fill="#90DFAA" p-id="175518"></path><path d="M198.4 195.8h627.4v461.2H198.4z" fill="#324A5E" p-id="175519"></path><path d="M256.2 246H768v360.6H256.2z" fill="#E6E9EE" p-id="175520"></path><path d="M512 320.2c-58.6 0-106.2 47.6-106.2 106.2s47.6 106.2 106.2 106.2 106.2-47.6 106.2-106.2-47.6-106.2-106.2-106.2z" fill="#F1543F" p-id="175521"></path><path d="M477.4 359.4v135.4l99-67.6z" fill="#FFFFFF" p-id="175522"></path><path d="M198.4 747.2h627.4v68H198.4z" fill="#E6E9EE" p-id="175523"></path><path d="M198.4 747.2H448v68H198.4z" fill="#FF7058" p-id="175524"></path><path d="M276.4 781.2m-47 0a47 47 0 1 0 94 0 47 47 0 1 0-94 0Z" fill="#324A5E" p-id="175525"></path></svg>
                                    调试
                                </a>
                            </div>
                        </div>
                        {% for case_assert in case_asserts%}
                        <div class="row case-assert mt-3">
                            <div class="input-group" style="width: 300px">
                                <span class="input-group-text">
                                    校验参数
                                </span>
                                <input type="text" class="form-control"  placeholder="请输入参数"  autocomplete="off" value="{{ case_assert.parameter }}">
                            </div>
                            <div class="input-group" style="width: 300px">
                                <div class="input-group-text">断言类型</div>
                                <select  class="select2-selection--single" data-placeholder="请选择断言类型">
                                    <option>==</option>
                                    <option>!=</option>
                                    <option>></option>
                                    <option><</option>
                                </select>
                            </div>
                            <div class="input-group" style="width: 300px">
                                <span class="input-group-text">
                                    预期值
                                </span>
                                <input  type="text" class="form-control"  placeholder="请输入预期值"  autocomplete="off" value="{{ case_assert.value }}">
                            </div>
                            <div class="col-auto">
                                <a href="#" class="btn btn-default">
                                    <svg t="1638010895757" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="175517" width="200" height="200"><path d="M512 512m-506 0a506 506 0 1 0 1012 0 506 506 0 1 0-1012 0Z" fill="#90DFAA" p-id="175518"></path><path d="M198.4 195.8h627.4v461.2H198.4z" fill="#324A5E" p-id="175519"></path><path d="M256.2 246H768v360.6H256.2z" fill="#E6E9EE" p-id="175520"></path><path d="M512 320.2c-58.6 0-106.2 47.6-106.2 106.2s47.6 106.2 106.2 106.2 106.2-47.6 106.2-106.2-47.6-106.2-106.2-106.2z" fill="#F1543F" p-id="175521"></path><path d="M477.4 359.4v135.4l99-67.6z" fill="#FFFFFF" p-id="175522"></path><path d="M198.4 747.2h627.4v68H198.4z" fill="#E6E9EE" p-id="175523"></path><path d="M198.4 747.2H448v68H198.4z" fill="#FF7058" p-id="175524"></path><path d="M276.4 781.2m-47 0a47 47 0 1 0 94 0 47 47 0 1 0-94 0Z" fill="#324A5E" p-id="175525"></path></svg>
                                    调试
                                </a>
                                <a href="#" class="btn btn-default remove-assert" style="margin-left: 10px">
                                    <svg t="1635400029781" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="17941" width="200" height="200"><path d="M877.79 217.23H624.22c0-36.02-29.2-65.23-65.23-65.23H465c-36.02 0-65.23 29.2-65.23 65.23H146.21c-18.01 0-32.61 14.6-32.61 32.61 0 18.01 14.6 32.61 32.61 32.61h49.75l14.43 528.79c1.06 33.91 25.21 60.76 54.64 60.76h493.93c29.43 0 53.58-26.86 54.64-60.76l14.48-528.79h49.7c18.01 0 32.61-14.6 32.61-32.61 0.01-18.01-14.59-32.61-32.6-32.61zM364.24 748.41c-17.98 0.82-33.4-10.01-34.44-24.19L308 427.56c-1.04-14.18 12.69-26.34 30.67-27.16 17.98-0.82 33.4 10.01 34.45 24.19l21.8 296.67c1.04 14.17-12.7 26.33-30.68 27.15z m180.37-25.42c0 14.2-14.6 25.72-32.61 25.72-18.01 0-32.61-11.51-32.61-25.72V425.83c0-14.2 14.6-25.72 32.61-25.72 18.01 0 32.61 11.51 32.61 25.72v297.16zM716 427.56l-21.8 296.67c-1.04 14.18-16.46 25.01-34.44 24.19-17.98-0.82-31.71-12.98-30.67-27.16l21.8-296.67c1.04-14.18 16.46-25.01 34.44-24.19 17.98 0.82 31.72 12.98 30.67 27.16z" fill="#FF5D5D" p-id="17942"></path></svg>
                                    删除
                                </a>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% else %}
    <div class="accordion mt-3">
        <div class="accordion-item">
            <h2 class="accordion-header" id="heading-3">
                <div class="accordion-button " type="button" data-bs-toggle="collapse" data-bs-target="#collapse-3" aria-expanded="true">
                    用例内容
                </div>
            </h2>
            <div id="collapse-3" class="accordion-collapse collapse show">
                <div class="accordion-body pt-2">
                    <div class="row mt-3 mb-3">
                        <div class="col-auto">
                            <a href="#" class="btn btn-default">
                                <svg t="1638010895757" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="175517" width="200" height="200"><path d="M512 512m-506 0a506 506 0 1 0 1012 0 506 506 0 1 0-1012 0Z" fill="#90DFAA" p-id="175518"></path><path d="M198.4 195.8h627.4v461.2H198.4z" fill="#324A5E" p-id="175519"></path><path d="M256.2 246H768v360.6H256.2z" fill="#E6E9EE" p-id="175520"></path><path d="M512 320.2c-58.6 0-106.2 47.6-106.2 106.2s47.6 106.2 106.2 106.2 106.2-47.6 106.2-106.2-47.6-106.2-106.2-106.2z" fill="#F1543F" p-id="175521"></path><path d="M477.4 359.4v135.4l99-67.6z" fill="#FFFFFF" p-id="175522"></path><path d="M198.4 747.2h627.4v68H198.4z" fill="#E6E9EE" p-id="175523"></path><path d="M198.4 747.2H448v68H198.4z" fill="#FF7058" p-id="175524"></path><path d="M276.4 781.2m-47 0a47 47 0 1 0 94 0 47 47 0 1 0-94 0Z" fill="#324A5E" p-id="175525"></path></svg>
                                调试
                            </a>
                        </div>
                    </div>
                    <textarea id="codeMirrorDemo3">
#!/usr/bin/env python
"""Script Demo 支持请求动态生成 python3"""

import sys
import os
import time
import requests

def get_response(url,data,timeout=30):
  """接口请求获取返回报文"""
  headers = {
        'Content-Type': "application/x-www-form-urlencoded",
        'Cache-Control': "no-cache"
    }
  response = requests.request("POST", url, data=data, headers=headers, timeout=timeout)
  return response

def make_request(data):
  """必须打印新的请求在终端才能获取"""
  print(data)

if __name__ == '__main__':

  #新接口请求参数依赖其他接口的返回
  data = 'username=elver&age=18'
  phone = get_response('http://xxxx/get_user_info',data)['data']['phone']
  new_data = f'username=elver&age=18&phone={phone}'
  #生成用例的请求报文
  make_request(new_data)
              </textarea>
                    <div class="row mt-3 mb-3">
                        <div class="col-auto">
                            <a href="#" class="btn btn-default add-assert">
                                <svg t="1638003419490" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="101642" width="200" height="200"><path d="M0 0m512 0l0 0q512 0 512 512l0 0q0 512-512 512l0 0q-512 0-512-512l0 0q0-512 512-512Z" fill="#517EFF" p-id="101643"></path><path d="M704 448a64 64 0 0 1 7.488 127.552L704 576H320a64 64 0 0 1-7.488-127.552L320 448h384z" fill="#FFFFFF" p-id="101644"></path><path d="M512 256a64 64 0 0 1 63.552 56.512L576 320v384a64 64 0 0 1-127.552 7.488L448 704V320a64 64 0 0 1 64-64z" fill="#FFFFFF" p-id="101645"></path></svg>
                                断言
                            </a>
                            <a href="#" class="btn btn-default" style="margin-left: 10px">
                                <svg t="1635400029781" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="17941" width="200" height="200"><path d="M877.79 217.23H624.22c0-36.02-29.2-65.23-65.23-65.23H465c-36.02 0-65.23 29.2-65.23 65.23H146.21c-18.01 0-32.61 14.6-32.61 32.61 0 18.01 14.6 32.61 32.61 32.61h49.75l14.43 528.79c1.06 33.91 25.21 60.76 54.64 60.76h493.93c29.43 0 53.58-26.86 54.64-60.76l14.48-528.79h49.7c18.01 0 32.61-14.6 32.61-32.61 0.01-18.01-14.59-32.61-32.6-32.61zM364.24 748.41c-17.98 0.82-33.4-10.01-34.44-24.19L308 427.56c-1.04-14.18 12.69-26.34 30.67-27.16 17.98-0.82 33.4 10.01 34.45 24.19l21.8 296.67c1.04 14.17-12.7 26.33-30.68 27.15z m180.37-25.42c0 14.2-14.6 25.72-32.61 25.72-18.01 0-32.61-11.51-32.61-25.72V425.83c0-14.2 14.6-25.72 32.61-25.72 18.01 0 32.61 11.51 32.61 25.72v297.16zM716 427.56l-21.8 296.67c-1.04 14.18-16.46 25.01-34.44 24.19-17.98-0.82-31.71-12.98-30.67-27.16l21.8-296.67c1.04-14.18 16.46-25.01 34.44-24.19 17.98 0.82 31.72 12.98 30.67 27.16z" fill="#FF5D5D" p-id="17942"></path></svg>
                                全部删除
                            </a>
                        </div>
                    </div>
                    <div class="assert-form">
                        <div class="row">
                            <div class="input-group" style="width: 300px">
                                <span class="input-group-text">
                                    校验参数
                                </span>
                                <input disabled type="text" class="form-control"  placeholder="请输入参数"  autocomplete="off" value="code">
                            </div>
                            <div class="input-group" style="width: 300px">
                                <div class="input-group-text">断言类型</div>
                                <select disabled class="select2-selection--single" data-placeholder="请选择断言类型">
                                    <option>==</option>
                                    <option>!=</option>
                                    <option>></option>
                                    <option><</option>
                                </select>
                            </div>
                            <div class="input-group" style="width: 300px">
                                <span class="input-group-text">
                                    预期值
                                </span>
                                <input disabled type="text" class="form-control"  placeholder="请输入预期值"  autocomplete="off" value="200">
                            </div>
                            <div class="col-auto">
                                <a href="#" class="btn btn-default">
                                    <svg t="1638010895757" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="175517" width="200" height="200"><path d="M512 512m-506 0a506 506 0 1 0 1012 0 506 506 0 1 0-1012 0Z" fill="#90DFAA" p-id="175518"></path><path d="M198.4 195.8h627.4v461.2H198.4z" fill="#324A5E" p-id="175519"></path><path d="M256.2 246H768v360.6H256.2z" fill="#E6E9EE" p-id="175520"></path><path d="M512 320.2c-58.6 0-106.2 47.6-106.2 106.2s47.6 106.2 106.2 106.2 106.2-47.6 106.2-106.2-47.6-106.2-106.2-106.2z" fill="#F1543F" p-id="175521"></path><path d="M477.4 359.4v135.4l99-67.6z" fill="#FFFFFF" p-id="175522"></path><path d="M198.4 747.2h627.4v68H198.4z" fill="#E6E9EE" p-id="175523"></path><path d="M198.4 747.2H448v68H198.4z" fill="#FF7058" p-id="175524"></path><path d="M276.4 781.2m-47 0a47 47 0 1 0 94 0 47 47 0 1 0-94 0Z" fill="#324A5E" p-id="175525"></path></svg>
                                    调试
                                </a>
                            </div>
                        </div>
                        {% for case_assert in case_asserts%}
                        <div class="row case-assert mt-3">
                            <div class="input-group" style="width: 300px">
                                <span class="input-group-text">
                                    校验参数
                                </span>
                                <input type="text" class="form-control"  placeholder="请输入参数"  autocomplete="off" value="{{ case_assert.parameter }}">
                            </div>
                            <div class="input-group" style="width: 300px">
                                <div class="input-group-text">断言类型</div>
                                <select  class="select2-selection--single" data-placeholder="请选择断言类型">
                                    <option>==</option>
                                    <option>!=</option>
                                    <option>></option>
                                    <option><</option>
                                </select>
                            </div>
                            <div class="input-group" style="width: 300px">
                                <span class="input-group-text">
                                    预期值
                                </span>
                                <input  type="text" class="form-control"  placeholder="请输入预期值"  autocomplete="off" value="{{ case_assert.value }}">
                            </div>
                            <div class="col-auto">
                                <a href="#" class="btn btn-default">
                                    <svg t="1638010895757" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="175517" width="200" height="200"><path d="M512 512m-506 0a506 506 0 1 0 1012 0 506 506 0 1 0-1012 0Z" fill="#90DFAA" p-id="175518"></path><path d="M198.4 195.8h627.4v461.2H198.4z" fill="#324A5E" p-id="175519"></path><path d="M256.2 246H768v360.6H256.2z" fill="#E6E9EE" p-id="175520"></path><path d="M512 320.2c-58.6 0-106.2 47.6-106.2 106.2s47.6 106.2 106.2 106.2 106.2-47.6 106.2-106.2-47.6-106.2-106.2-106.2z" fill="#F1543F" p-id="175521"></path><path d="M477.4 359.4v135.4l99-67.6z" fill="#FFFFFF" p-id="175522"></path><path d="M198.4 747.2h627.4v68H198.4z" fill="#E6E9EE" p-id="175523"></path><path d="M198.4 747.2H448v68H198.4z" fill="#FF7058" p-id="175524"></path><path d="M276.4 781.2m-47 0a47 47 0 1 0 94 0 47 47 0 1 0-94 0Z" fill="#324A5E" p-id="175525"></path></svg>
                                    调试
                                </a>
                                <a href="#" class="btn btn-default remove-assert" style="margin-left: 10px">
                                    <svg t="1635400029781" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="17941" width="200" height="200"><path d="M877.79 217.23H624.22c0-36.02-29.2-65.23-65.23-65.23H465c-36.02 0-65.23 29.2-65.23 65.23H146.21c-18.01 0-32.61 14.6-32.61 32.61 0 18.01 14.6 32.61 32.61 32.61h49.75l14.43 528.79c1.06 33.91 25.21 60.76 54.64 60.76h493.93c29.43 0 53.58-26.86 54.64-60.76l14.48-528.79h49.7c18.01 0 32.61-14.6 32.61-32.61 0.01-18.01-14.59-32.61-32.6-32.61zM364.24 748.41c-17.98 0.82-33.4-10.01-34.44-24.19L308 427.56c-1.04-14.18 12.69-26.34 30.67-27.16 17.98-0.82 33.4 10.01 34.45 24.19l21.8 296.67c1.04 14.17-12.7 26.33-30.68 27.15z m180.37-25.42c0 14.2-14.6 25.72-32.61 25.72-18.01 0-32.61-11.51-32.61-25.72V425.83c0-14.2 14.6-25.72 32.61-25.72 18.01 0 32.61 11.51 32.61 25.72v297.16zM716 427.56l-21.8 296.67c-1.04 14.18-16.46 25.01-34.44 24.19-17.98-0.82-31.71-12.98-30.67-27.16l21.8-296.67c1.04-14.18 16.46-25.01 34.44-24.19 17.98 0.82 31.72 12.98 30.67 27.16z" fill="#FF5D5D" p-id="17942"></path></svg>
                                    删除
                                </a>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% endif %}


    {% else %}
    <div class="empty">
        <div class="empty-img"><img src="/static/tabler/static/illustrations/undraw_printing_invoices_5r4r.svg"></div>
        <p class="empty-title">No results found</p>
    </div>
    {% endif %}
</div>

<div class="modal modal-blur fade" id="modal-new-case" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">创建用例</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" >
                <div class="form-selectgroup-boxes row">
                    <div class="col-lg-4">
                        <label class="form-selectgroup-item">
                            <input type="radio"  name="case_type" value="Get" class="form-selectgroup-input" checked>
                            <span class="form-selectgroup-label d-flex align-items-center p-3">
                                <span class="me-3">
                                    <span class="form-selectgroup-check"></span>
                                </span>
                                <span class="form-selectgroup-label-content">
                                    <span class="form-selectgroup-title strong mb-1">Get</span>
                                    <span class="d-block text-muted">Get请求体</span>
                                </span>
                            </span>
                        </label>
                    </div>
                    <div class="col-lg-4">
                        <label class="form-selectgroup-item">
                            <input type="radio"  name="case_type" value="Json" class="form-selectgroup-input">
                            <span class="form-selectgroup-label d-flex align-items-center p-3">
                                <span class="me-3">
                                    <span class="form-selectgroup-check"></span>
                                </span>
                                <span class="form-selectgroup-label-content">
                                    <span class="form-selectgroup-title strong mb-1">Json</span>
                                    <span class="d-block text-muted">Json请求体</span>
                                </span>
                            </span>
                        </label>
                    </div>
                    <div class="col-lg-4">
                        <label class="form-selectgroup-item">
                            <input type="radio"  name="case_type" value="Script" class="form-selectgroup-input">
                            <span class="form-selectgroup-label d-flex align-items-center p-3">
                                <span class="me-3">
                                    <span class="form-selectgroup-check"></span>
                                </span>
                                <span class="form-selectgroup-label-content">
                                    <span class="form-selectgroup-title strong mb-1">Script</span>
                                    <span class="d-block text-muted">脚本自定义</span>
                                </span>
                            </span>
                        </label>
                    </div>
                </div>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="new_case_content">
                            <div class="col">
                                <div class="input-group">
                                    <span class="input-group-text">
                                        用例名称
                                    </span>
                                    <input id="new_case_name" type="text" class="form-control"  placeholder="请输入任务名称.."  autocomplete="off">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <a href="#" class="btn btn-link link-secondary" data-bs-dismiss="modal">取消</a>
                <a href="#" class="btn btn-primary ms-auto"  id="create_case">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><line x1="12" y1="5" x2="12" y2="19" /><line x1="5" y1="12" x2="19" y2="12" /></svg>
                    创建
                </a>
            </div>
        </div>
    </div>
</div>

<div class="modal modal-blur fade" id="modal-danger" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-sm modal-dialog-centered" role="document">
        <div class="modal-content">
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            <div class="modal-status bg-danger"></div>
            <div class="modal-body text-center py-4">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon mb-2 text-danger icon-lg" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 9v2m0 4v.01" /><path d="M5 19h14a2 2 0 0 0 1.84 -2.75l-7.1 -12.25a2 2 0 0 0 -3.5 0l-7.1 12.25a2 2 0 0 0 1.75 2.75" /></svg>
                <h3>确认删除?</h3>
                <div class="text-muted case-name"></div>
            </div>
            <div class="modal-footer">
                <div class="w-100">
                    <div class="row">
                        <div class="col">
                            <a href="#" class="btn btn-white w-100" data-bs-dismiss="modal">
                            取消
                            </a>
                        </div>
                        <div class="col">
                            <a href="#" id="del_case_confirm" class="btn btn-danger w-100">
                            确认
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


{% endblock %}

{% block api_script %}

<script>

    $('#create_case').on('click', function () {
        let taskname = '{{ taskname }}';
        let apiname = '{{ apiname }}';
        let case_name = $('#new_case_name').val().trim();
        let case_type = $(':radio[name="case_type"]:checked').val();
        if(case_name && case_type){
            $.ajax({
                url: "/api_test/api/create_task_case",
                type: "POST",
                async: true,
                cache: false,
                data:{
                    taskname: taskname,
                    apiname: apiname,
                    case_type:case_type,
                    casename:case_name
                },
                beforeSend: function () {
                    loading();
                    },
                complete: function () {
                    removeLoading()
                },
                success: function (data) {
                    if(data['status'] != 1 ){
                        Spop(SPOP_TYPE['error'],data['msg'])
                    }else{
                        window.location.href = '/api_test/automation/{{ taskname }}/{{ apiname }}/'+case_name
                    }
                }
            });
        }else{
            Spop(SPOP_TYPE['error'],'用例名称不能为空')
        }
    });

    function del_case(casename){

        let taskname = '{{ taskname }}';

        let apiname = '{{ apiname }}';

        $('.case-name').text(casename)

        $('#del_case_confirm').on('click', function () {
            $.ajax({
                url: "/api_test/api/delete_task_case",
                type: "POST",
                async: true,
                cache: false,
                data:{
                    casename: casename,
                    taskname:taskname,
                    apiname:apiname
                },
                beforeSend: function () {
                    loading();
                    },
                complete: function () {
                    removeLoading()
                },
                success: function (data) {
                    if(data['first_casename'] == 'no case' ){
                        window.location.href = '/api_test/automation/{{ taskname }}/{{ apiname }}'
                    }else{
                        window.location.href = '/api_test/automation/{{ taskname }}/{{ apiname }}/'+data['first_casename']
                    }
                }
            });
        });

    }

    $(document).ready(function () {
        window.active_id = -1
    })

    $('.add-assert').on('click', function (e) {
        e.preventDefault();
        let id = active_id
        console.log(id)
        let i = $('.assert-form').children().length
        $(document).ready(function() {
            $('.select2-selection--single').select2({
                theme: "bootstrap-5",
                containerCssClass: "select2--small",
                selectionCssClass: "select2--small",
                dropdownCssClass: "select2--small",
            });
        });

        $('.assert-form').append('<div id="case_"'+ id + '_' + i +' class="row mt-3">\n' +
        '                        <div class="input-group" style="width: 300px">\n' +
        '                            <span class="input-group-text">\n' +
        '                                校验参数\n' +
        '                            </span>\n' +
        '                            <input type="text" class="form-control"  placeholder="请输入参数"  autocomplete="off" value="{{ case.parameter }}">\n' +
        '                        </div>\n' +
        '                        <div class="input-group" style="width: 300px">\n' +
        '                            <div class="input-group-text">断言类型</div>\n' +
        '                            <select class="select2-selection--single"  data-placeholder="请选择断言类型">\n' +
        '                                <option>==</option>\n' +
        '                                <option>!=</option>\n' +
        '                                <option>></option>\n' +
        '                                <option><</option>\n' +
        '                            </select>\n' +
        '                        </div>\n' +
        '                        <div class="input-group" style="width: 300px">\n' +
        '                            <span class="input-group-text">\n' +
        '                                预期值\n' +
        '                            </span>\n' +
        '                            <input type="text" class="form-control"  placeholder="请输入预期值"  autocomplete="off" value="{{ case.value }}">\n' +
        '                        </div>\n' +
        '\n' +
        '                        <div class="col-auto">\n' +
        '                            <a href="#" class="btn btn-default">\n' +
        '                                <svg t="1638010895757" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="175517" width="200" height="200"><path d="M512 512m-506 0a506 506 0 1 0 1012 0 506 506 0 1 0-1012 0Z" fill="#90DFAA" p-id="175518"></path><path d="M198.4 195.8h627.4v461.2H198.4z" fill="#324A5E" p-id="175519"></path><path d="M256.2 246H768v360.6H256.2z" fill="#E6E9EE" p-id="175520"></path><path d="M512 320.2c-58.6 0-106.2 47.6-106.2 106.2s47.6 106.2 106.2 106.2 106.2-47.6 106.2-106.2-47.6-106.2-106.2-106.2z" fill="#F1543F" p-id="175521"></path><path d="M477.4 359.4v135.4l99-67.6z" fill="#FFFFFF" p-id="175522"></path><path d="M198.4 747.2h627.4v68H198.4z" fill="#E6E9EE" p-id="175523"></path><path d="M198.4 747.2H448v68H198.4z" fill="#FF7058" p-id="175524"></path><path d="M276.4 781.2m-47 0a47 47 0 1 0 94 0 47 47 0 1 0-94 0Z" fill="#324A5E" p-id="175525"></path></svg>\n' +
        '                                调试\n' +
        '                            </a>\n' +
        '                            <a href="#" class="btn btn-default remove-assert" style="margin-left: 10px">\n' +
        '                                <svg t="1635400029781" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="17941" width="200" height="200"><path d="M877.79 217.23H624.22c0-36.02-29.2-65.23-65.23-65.23H465c-36.02 0-65.23 29.2-65.23 65.23H146.21c-18.01 0-32.61 14.6-32.61 32.61 0 18.01 14.6 32.61 32.61 32.61h49.75l14.43 528.79c1.06 33.91 25.21 60.76 54.64 60.76h493.93c29.43 0 53.58-26.86 54.64-60.76l14.48-528.79h49.7c18.01 0 32.61-14.6 32.61-32.61 0.01-18.01-14.59-32.61-32.6-32.61zM364.24 748.41c-17.98 0.82-33.4-10.01-34.44-24.19L308 427.56c-1.04-14.18 12.69-26.34 30.67-27.16 17.98-0.82 33.4 10.01 34.45 24.19l21.8 296.67c1.04 14.17-12.7 26.33-30.68 27.15z m180.37-25.42c0 14.2-14.6 25.72-32.61 25.72-18.01 0-32.61-11.51-32.61-25.72V425.83c0-14.2 14.6-25.72 32.61-25.72 18.01 0 32.61 11.51 32.61 25.72v297.16zM716 427.56l-21.8 296.67c-1.04 14.18-16.46 25.01-34.44 24.19-17.98-0.82-31.71-12.98-30.67-27.16l21.8-296.67c1.04-14.18 16.46-25.01 34.44-24.19 17.98 0.82 31.72 12.98 30.67 27.16z" fill="#FF5D5D" p-id="17942"></path></svg>\n' +
        '                                删除\n' +
        '                            </a>\n' +
        '                        </div>\n' +
        '                    </div>')

    });


    $(document).on('click', '.remove-assert', function (e) {
        e.preventDefault();
        if ($('.assert-form').children().length == 1) {
            Spop(SPOP_TYPE['error'],'最后一个')
        } else {
            $("#" + $(this).parent().parent().attr('id')).remove()
        }

    })
    var container = document.getElementById('request_editor')

    var options = {
        mode: 'form',
        modes: ['code', 'form', 'text', 'tree', 'view', 'preview'],
        onModeChange: function (newMode, oldMode) {
            console.log('Mode switched from', oldMode, 'to', newMode)
        }
    }

    var json = {
        "user": "elver"
    }

    var editor = new JSONEditor(container, options, json)


</script>

<script>
    CodeMirror.fromTextArea(document.getElementById("codeMirrorDemo3"), {
        mode: "python",
        theme: "monokai",
        lineNumbers: true
    });
</script>
{% endblock %}
