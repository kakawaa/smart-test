{% extends 'api_base.html' %}
{% block title %}自动化测试 - {{ taskname }} - 测试报告{% endblock %}
{% block page-title %}
<a class="active" style="color: #1e71df" href="/api_test/automation">自动化测试</a>
<svg t="1635085520789" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="165732" width="200" height="200"><path d="M360.704 280.746667l45.226667-45.226667 246.570666 246.528a42.666667 42.666667 0 0 1 0 60.330667l-246.528 246.570666-45.22666601-45.269333 231.42400001-231.466667-231.466667-231.424z" p-id="165733"></path></svg>
<a class="active" style="color: #1e71df" href="/api_test/automation/{{ taskname }}">{{ taskname }}</a>
<svg t="1635085520789" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="165732" width="200" height="200"><path d="M360.704 280.746667l45.226667-45.226667 246.570666 246.528a42.666667 42.666667 0 0 1 0 60.330667l-246.528 246.570666-45.22666601-45.269333 231.42400001-231.466667-231.466667-231.424z" p-id="165733"></path></svg>
测试报告
{% endblock %}

{% block api_tab %}
<li class="nav-item">
    <a  onclick="tab_click('post')" class="nav-link" data-bs-toggle="tab"><!-- Download SVG icon from http://tabler-icons.io/i/home -->
        <svg xmlns="http://www.w3.org/2000/svg" class="icon me-2" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="12" cy="7" r="4" /><path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" /></svg>
        手工测试
    </a>
</li>
<li class="nav-item">
    <a  onclick="tab_click('automation')" class="nav-link active" data-bs-toggle="tab"><!-- Download SVG icon from http://tabler-icons.io/i/user -->
        <svg t="1636172939547" class="icon me-2" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4269" width="200" height="200"><path d="M212.704 410.208l-13.76-14.88-109.696 101.472 108.064 96.192 13.504-15.104-91.36-81.376zM535.904 410.208l13.856-14.88 109.6 101.472-108.032 96.192-13.44-15.104 91.328-81.376z" p-id="4270"></path><path d="M551.2 596.384l-16.704-18.688 91.2-81.216-93.12-86.112 17.056-18.432 113.376 104.928-1.984 1.76zM197.504 596.384l-1.792-1.6-110.048-97.952 1.952-1.792 111.424-103.136 17.056 18.432-93.088 86.112 91.168 81.216-16.672 18.72z m-104.672-99.616l104.288 92.832 10.304-11.52-91.552-81.504 1.952-1.792 91.488-84.64-10.528-11.424-105.952 98.048z" p-id="4271"></path><path d="M50.368 274.24h913.344v-20.288H50.368z" p-id="4272"></path><path d="M966.112 276.64H47.968V251.52h918.144v25.12z m-913.344-4.8h908.544v-15.488H52.768v15.488z" p-id="4273"></path><path d="M121.376 193.056h20.288v20.32h-20.288z" p-id="4274"></path><path d="M144.064 215.776h-25.088v-25.12h25.088v25.12z m-20.256-4.832h15.456v-15.488h-15.456v15.488z" p-id="4275"></path><path d="M202.592 193.056h20.288v20.32h-20.288z" p-id="4276"></path><path d="M225.28 215.776h-25.12v-25.12h25.12v25.12z m-20.288-4.832h15.488v-15.488h-15.488v15.488z" p-id="4277"></path><path d="M283.744 193.056h20.288v20.32h-20.288z" p-id="4278"></path><path d="M306.432 215.776h-25.088v-25.12h25.088v25.12z m-20.288-4.832h15.456v-15.488h-15.456v15.488z" p-id="4279"></path><path d="M60.48 883.136V152.448H953.6v552.032c1.408-0.16 2.72-0.48 4.288-0.48 5.92 0 11.072 0.992 16 2.336V132.16H40.192v771.2h598.176a59.776 59.776 0 0 1-11.008-20.32H60.48v0.096z" p-id="4280"></path><path d="M643.488 905.824H37.792V129.76h938.496v579.776l-3.04-0.768a56.448 56.448 0 0 0-15.36-2.208 15.744 15.744 0 0 0-2.56 0.256l-4.128 0.544V154.848H62.88v725.856h566.272l0.544 1.728c2.304 7.328 5.888 13.92 10.528 19.456l3.264 3.936z m-600.864-4.832h590.88a59.264 59.264 0 0 1-7.84-15.488H58.08V150.048h897.92v551.776c4.576-0.48 9.952 0.256 15.424 1.504V134.592H42.624v766.4z" p-id="4281"></path><path d="M458.144 367.36l-152.32 263.648-17.6-10.176 152.288-263.648z" p-id="4282"></path><path d="M306.688 634.24l-21.76-12.576 1.216-2.016 153.504-265.728 21.76 12.576z" p-id="4283"></path><path d="M578.016 814.592c0.064 0.032 0.064 0.096 0.128 0.096-0.032 0.064-0.096 0.032-0.128-0.096z" p-id="4284"></path><path d="M841.056 980.928l-3.328-0.192a50.752 50.752 0 0 1-32.544-13.568l-4.768-5.408c-4.288-7.328-18.496-15.2-29.92-15.2a23.392 23.392 0 0 0-20.096 12.128l-3.936 5.632c-18.304 17.312-37.6 20.096-57.792 10.464l-52.768-30.624a48.096 48.096 0 0 1-15.008-56.448c1.568-3.936 2.56-8.32 2.688-12.16 0-16.48-12.416-30.72-28.128-29.984a35.52 35.52 0 0 1-32.704-18.912c-0.64-1.12-1.472-3.072-1.984-4.256l-0.096-0.192-6.528-14.784a223.68 223.68 0 0 1-0.096-90.336c4.48-24.032 19.616-38.56 40.48-38.56 15.168-0.064 27.616-13.568 27.648-29.44a38.944 38.944 0 0 0-2.688-12.576 48.448 48.448 0 0 1 15.712-57.152l3.52-2.304 55.456-31.2c6.56-1.92 11.424-2.56 15.584-2.56 13.6 0 25.76 4.704 34.976 13.312l4.448 4.768c15.2 24.032 45.344 8.96 49.056 3.04l4.32-5.728c18.56-16.608 37.984-18.048 56.992-9.28l52.832 30.784c17.44 13.312 23.424 36.896 15.2 56.704a41.664 41.664 0 0 0-2.752 12.384c0.032 10.4 2.368 29.376 18.144 29.376h3.712c20.832 0 36.512 14.688 40.864 38.304 6.144 29.344 6.176 60.64 0.064 90.08-4.512 23.744-20.192 38.688-40.864 38.688-16.352 0-18.08 20.672-18.08 29.568 0.224 4.224 1.088 8.64 2.72 12.672 8.384 20.416 1.92 43.968-15.84 57.088l-3.392 2.24-52.736 29.92a47.776 47.776 0 0 1-18.368 3.712z m-70.528-66.336c21.76 0 46.976 12.896 56.192 28.736a18.72 18.72 0 0 0 12.864 5.472l1.472 16.128v-16a18.816 18.816 0 0 0 5.568-0.864l49.76-28.48a16.32 16.32 0 0 0 5.44-19.52 72.224 72.224 0 0 1-4.992-23.904c-0.032-37.568 20.096-62.304 50.048-62.304 5.824 0 8.384-7.04 9.504-12.928a191.808 191.808 0 0 0-0.064-77.664c-1.568-8.416-4.736-12.512-9.504-12.512h-3.712c-30.432 0-50.112-24.448-50.112-62.272 0.448-8.448 2.176-16.256 5.056-23.488 2.784-6.72 0.928-14.784-4.128-18.656l-48.992-28.448a15.392 15.392 0 0 0-6.688-1.504h-0.032a18.048 18.048 0 0 0-12.288 4.576c-10.496 16.608-36.32 26.144-55.488 26.144a55.36 55.36 0 0 1-46.784-26.368 18.176 18.176 0 0 0-12.992-5.344h-0.032a19.616 19.616 0 0 0-5.12 0.608l-50.848 28.96a16.544 16.544 0 0 0-5.408 19.584c2.944 7.328 4.64 15.328 4.992 23.904 0 34.432-26.528 61.984-59.072 62.144-2.56-0.064-7.296 0.032-9.664 12.736a192.128 192.128 0 0 0 0.064 77.728l0.448 1.152c0.928 1.44 1.728 2.688 2.336 3.744l2.016 4.16-2.336 18.528 4.896-15.232a62.112 62.112 0 0 1 62.688 62.784c-0.32 8.128-2.016 16.032-5.024 23.552-2.752 6.624-0.896 14.688 4.128 18.496l48.864 28.224a14.816 14.816 0 0 0 6.688 1.536 17.824 17.824 0 0 0 12.16-4.896c10.432-17.792 28.736-28.512 48.096-28.512z" p-id="4285"></path><path d="M775.584 894.688a132.608 132.608 0 0 1-132.512-132.448c0-73.088 59.424-132.576 132.512-132.576s132.544 59.456 132.544 132.576a132.64 132.64 0 0 1-132.544 132.448z m0-232.992a100.672 100.672 0 0 0-100.512 100.576 100.608 100.608 0 0 0 100.512 100.448 100.608 100.608 0 0 0 100.544-100.448 100.672 100.672 0 0 0-100.544-100.576z" p-id="4286"></path></svg>
        自动化测试
    </a>
</li>
<li class="nav-item">
    <a  onclick="tab_click('stress')" class="nav-link" data-bs-toggle="tab"><!-- Download SVG icon from http://tabler-icons.io/i/user -->
        <svg t="1636371462410" class="icon me-2" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2741" width="200" height="200"><path d="M461.223546 894.876154c-1.062192 0-2.099824-0.048095-3.162016-0.193405-11.732206-1.497097-20.736277-11.103896-21.532409-22.884197l-40.336684-605.249801L287.129486 630.065999c-3.186576 10.670014-14.097066 17.911952-24.260543 17.621333-11.128455-0.2415-20.711717-7.91732-23.390733-18.732643l-38.864146-155.385976-68.000743 68.000743c-4.634554 4.634554-10.911514 7.241938-17.477047 7.241938L65.698305 548.811394l0-49.437969 39.20286 0 91.634-91.634c6.300496-6.300496 15.425318-8.810666 24.067138-6.348592 8.593725 2.38942 15.231913 9.197476 17.380856 17.839297l27.6395 110.48637 122.460076-408.222425c3.451612-11.466146 14.677281-18.732643 26.456558-17.477047 11.876492 1.351787 21.097504 11.007705 21.894659 22.932292l41.061185 616.136755 108.555391-325.68971c3.186576-9.487072 11.732206-16.125259 21.725814-16.825201 10.041704-0.627287 19.408025 4.634554 23.850198 13.59053l76.763314 153.526629 27.326369-54.651714c4.200672-8.376785 12.745279-13.663184 22.1116-13.663184l197.750853 0 0 49.437969L773.08225 548.811394l-42.581818 85.212754c-8.400321 16.70445-35.82288 16.70445-44.223201 0l-72.176856-144.378272L484.638839 877.978299C481.259882 888.165312 471.724715 894.876154 461.223546 894.876154z" p-id="2742"></path></svg>
        压力测试
    </a>
</li>
{% endblock %}

{% block api_tab_content %}
<div class="tab-pane active" style="margin-left: 20px;margin-right: 20px">

    {% if report_num > 0%}
    <div class="row mb-3 mt-2">
        <div class="input-group" style="width: 35%">
            <div class="input-group-text">执行记录</div>
            <select id="run_id_select" class="select2-selection--single" data-placeholder="Choose one thing"  >
                <option>{{ run_id }}</option>
                {% for run_id_list in run_ids %}
                {% if run_id_list.run_id != run_id %}
                <option>{{ run_id_list.run_id }}</option>
                {% endif %}
                {% endfor %}
            </select>
        </div>
        <div class="col-auto">
            <a  class="btn btn-default" data-bs-toggle="modal" data-bs-target="#modal-new-api">
                <svg t="1639302749457" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="9681" width="200" height="200"><path d="M512 512m-400 0a400 400 0 1 0 800 0 400 400 0 1 0-800 0Z" fill="#7ACD22" p-id="9682"></path><path d="M641.7 582.3c-20.7 0-39.5 8.4-53.1 22l-173.4-82.7c0.7-3.6 0.9-7.3 1.1-11l153.9-131.8c6.8 2.1 13.9 3.5 21.5 3.5 41.4 0 75-33.6 75-75s-33.6-75-75-75-75 33.6-75 75c0 15.1 4.6 29.2 12.3 41L399.1 459.6c-13.8-16.5-34.2-27.2-57.4-27.2-41.4 0-75 33.6-75 75s33.6 75 75 75c18.2 0 34.7-6.8 47.7-17.6l178 84.9c-0.3 2.6-0.8 5.1-0.8 7.7 0 41.4 33.6 75 75 75s75-33.6 75-75-33.5-75.1-74.9-75.1z" fill="#FFFFFF" p-id="9683"></path></svg>
                分享报告
            </a>
        </div>
    </div>
    <div class="mt-4" style="border: none">
        <div class="row report-title mb-3">
            <div class="col-6">
                <div class="mb-3">
                    <svg t="1639303596740" class="icon me-2 text-muted" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="37425" width="200" height="200"><path d="M512 1022.1056c-282.3168 0-511.232-228.864-511.232-511.0784S229.632 0 512 0c282.3168 0 511.232 228.8128 511.232 511.0272 0 282.2656-228.864 511.0784-511.232 511.0784z m0-926.2592a415.2832 415.2832 0 0 0-415.3856 415.232c0 107.2128 41.0624 204.6464 107.8272 278.3232 60.16-29.1328 38.0416-4.9152 116.736-37.2736 80.5888-33.1264 99.6352-44.6464 99.6352-44.6464l0.768-76.288s-30.1568-22.8864-39.5264-94.72c-18.8928 5.4272-25.088-22.016-26.2144-39.424-1.024-16.896-10.9568-69.4784 12.0832-64.7168-4.7104-35.1744-8.0896-66.8672-6.4-83.6608 5.7344-58.88 62.976-120.5248 151.0912-124.9792 103.68 4.4544 144.7424 66.048 150.528 124.928 1.6384 16.8448-2.048 48.5376-6.7584 83.6096 23.04-4.6592 13.0048 47.872 11.8784 64.7168-1.024 17.408-7.3728 44.7488-26.2144 39.3728-9.4208 71.7824-39.5776 94.464-39.5776 94.464l0.7168 75.9296s19.0976 10.8032 99.6352 43.9296c78.6944 32.3584 56.576 9.5744 116.736 38.7584a413.184 413.184 0 0 0 107.776-278.3744A415.232 415.232 0 0 0 512 95.7952z" fill="#4EB0FA" p-id="37426"></path></svg>
                    执行人: <strong>{{ runner }}</strong>
                </div>
                <div class="mb-3">
                    <svg t="1639377634705" class="icon me-2 text-muted" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="9446" width="200" height="200"><path d="M189.3376 411.904h653.6704c-10.3424-101.5296-96.1536-180.7872-200.3968-180.7872H389.7344c-104.2944 0-190.0544 79.2576-200.3968 180.7872z" fill="#FFD833" p-id="9447"></path><path d="M873.5232 556.7488c-14.1312 0-25.6-11.4688-25.6-25.6v-5.4272c0-14.1312 11.4688-25.6 25.6-25.6s25.6 11.4688 25.6 25.6v5.4272c0 14.1312-11.4688 25.6-25.6 25.6z" fill="#44454A" p-id="9448"></path><path d="M873.5232 477.5424c14.1312 0 25.6-11.4688 25.6-25.6V373.8112c0-119.7568-93.2352-218.112-210.944-226.4064v-30.1056c0-14.1312-11.4688-25.6-25.6-25.6s-25.6 11.4688-25.6 25.6v29.44h-270.848v-29.44c0-14.1312-11.4688-25.6-25.6-25.6s-25.6 11.4688-25.6 25.6v30.0544C197.12 155.5456 103.7312 253.952 103.7312 373.8112v338.8416c0 125.184 101.8368 227.072 227.072 227.072h341.2992c125.184 0 227.072-101.8368 227.072-227.072v-105.7792c0-14.1312-11.4688-25.6-25.6-25.6s-25.6 11.4688-25.6 25.6v105.7792c0 96.9728-78.8992 175.872-175.872 175.872H330.8032c-96.9728 0-175.872-78.8992-175.872-175.872V439.9616h692.992v11.9808c0 14.1312 11.4688 25.6 25.6 25.6zM154.9312 388.7616v-14.8992c0-91.648 70.4512-167.0656 160.0512-175.104v42.24c0 14.1312 11.4688 25.6 25.6 25.6s25.6-11.4688 25.6-25.6v-43.008h270.848v43.008c0 14.1312 11.4688 25.6 25.6 25.6s25.6-11.4688 25.6-25.6v-42.24c89.4464 8.192 159.744 83.5584 159.744 175.104v14.8992H154.9312z" fill="#44454A" p-id="9449"></path><path d="M325.4784 570.0096m-33.536 0a33.536 33.536 0 1 0 67.072 0 33.536 33.536 0 1 0-67.072 0Z" fill="#44454A" p-id="9450"></path><path d="M503.7568 570.0096m-33.536 0a33.536 33.536 0 1 0 67.072 0 33.536 33.536 0 1 0-67.072 0Z" fill="#44454A" p-id="9451"></path><path d="M679.424 570.0096m-33.536 0a33.536 33.536 0 1 0 67.072 0 33.536 33.536 0 1 0-67.072 0Z" fill="#44454A" p-id="9452"></path><path d="M325.4784 728.7296m-33.536 0a33.536 33.536 0 1 0 67.072 0 33.536 33.536 0 1 0-67.072 0Z" fill="#44454A" p-id="9453"></path><path d="M503.7568 728.7296m-33.536 0a33.536 33.536 0 1 0 67.072 0 33.536 33.536 0 1 0-67.072 0Z" fill="#44454A" p-id="9454"></path><path d="M679.424 728.7296m-33.536 0a33.536 33.536 0 1 0 67.072 0 33.536 33.536 0 1 0-67.072 0Z" fill="#44454A" p-id="9455"></path></svg>
                    执行时间: <strong>{{ ctime }}</strong>
                </div>
                <div class="mb-3">
                    <svg t="1639303426151" class="icon me-2 text-muted" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="26599" width="200" height="200"><path d="M912.68808594 491.25869141c-0.00175781-214.95146484-173.68769531-389.99355469-389.68769532-390.25634766v409.99746094H912.88671875c0.30146484-6.99960937-0.19863281-13.37871094-0.19863281-19.74023438z" fill="#FF5A15" p-id="26600"></path><path d="M507.17041016 876.25390625c-191.97949219 0.00878906-347.72958984-155.34404297-347.72167969-347.32177734-0.00615234-176.40439453 131.55117187-321.80537109 301.55097656-344.28251954V135.14609375C262.99970703 157.91679687 110.31083984 325.64990234 110.31083984 529.22041016c0 219.11484375 177.68847656 396.17578125 396.79980469 396.18017578 200.81953125-0.00439453 366.81416016-149.40087891 393.12246094-343.40097657h-49.66347656c-25.90400391 167.00097656-169.76074219 294.2578125-343.39921875 294.25429688z" fill="#FF5A15" p-id="26601"></path></svg>
                    总数: <strong>{{ report_num }}</strong>
                </div>
                <div class="mb-3">
                    <svg t="1639303301751" class="icon me-2 text-muted" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="20418" width="200" height="200"><path d="M513 524.652m-429.522 0a429.522 429.522 0 1 0 859.044 0 429.522 429.522 0 1 0-859.044 0Z" fill="#78C06E" p-id="20419"></path><path d="M794.07 408.363L464.187 738.246c-7.791 7.791-18.555 12.611-30.443 12.611-11.887 0-22.651-4.82-30.442-12.611L216.874 551.778a42.753 42.753 0 0 1-12.61-30.402c0-23.774 19.278-43.012 43.013-43.012 11.887 0 22.649 4.82 30.442 12.61l156.025 155.985 299.481-299.481c7.791-7.75 18.555-12.57 30.442-12.57 23.736 0 43.013 19.278 43.013 43.013 0.001 11.887-4.819 22.649-12.61 30.442z" fill="#FFFFFF" p-id="20420"></path></svg>
                    成功: <strong>{{ success_num }}</strong>
                </div>
                <div class="mb-3">
                    <svg t="1639303387073" class="icon me-2 text-muted" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="25587" width="200" height="200"><path d="M509.952 57.059556c250.823111 0 453.973333 203.889778 453.973333 455.111111s-203.150222 455.111111-453.973333 455.111111c-250.311111 0-453.063111-203.889778-453.063111-455.111111s202.752-455.111111 453.063111-455.111111z m118.556444 266.012444L507.448889 444.529778 386.446222 323.072 321.934222 387.811556 442.993778 509.155556 321.991111 630.727111l64.512 64.682667 121.002667-121.514667 121.059555 121.514667 64.512-64.682667-121.116444-121.514667 121.116444-121.400888-64.512-64.739556z" fill="#FF5A5A" p-id="25588"></path></svg>
                    失败: <strong>{{ fail_num }}</strong>
                </div>
            </div>
            <div class="col-6 text-end">
                <div id="chart-demo-pie"></div>
            </div>
        </div>

        <div class="report">
            <div class="card">
                <table class="table card-table table-vcenter  datatable">
                    <thead>
                    <tr>
                        <th style="font-size: 13px;width: 20%">接口</th>
                        <th style="font-size: 13px;width: 15%">用例</th>
                        <th style="font-size: 13px;width: 10%">参数</th>
                        <th style="font-size: 13px;width: 10%">预期值</th>
                        <th style="font-size: 13px;width: 10%">断言</th>
                        <th style="font-size: 13px;width: 10%">实际值</th>
                        <th style="font-size: 13px;width: 10%">状态</th>
                        <th class="report-text" style="font-size: 13px;width: 30%">返回报文</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for result in results %}
                    <tr>
                        <td>{{ result.apiname }}</td>
                        <td>{{ result.casename }}</td>
                        <td>{{ result.parameter }}</td>
                        <td>{{ result.pre_value }}</td>
                        <td>{{ result.assert_type }}</td>
                        <td>{{ result.final_value }}</td>
                        {% if result.status == '失败' %}
                        <td><span class="badge bg-red">失败</span></td>
                        {% else %}
                        <td><span class="badge bg-success">成功</span></td>
                        {% endif %}
                        <td class="report-text">
                            {{result.response }}
                        </td>
                    </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    {% else %}
    <div class="empty">
        <div class="empty-img"><img src="/static/tabler/static/illustrations/undraw_printing_invoices_5r4r.svg"></div>
        <p class="empty-title">No results found</p>
    </div>
    {% endif %}
</div>
<div class="modal modal-blur fade" id="modal-response" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">返回内容</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <pre id="json"></pre>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block api_script %}
<script>
    document.addEventListener("DOMContentLoaded", function () {
      	window.ApexCharts && (new ApexCharts(document.getElementById('chart-demo-pie'), {
      		chart: {
      			type: "donut",
      			fontFamily: 'inherit',
      			height: 220,
      			sparkline: {
      				enabled: true
      			},
      			animations: {
      				enabled: false
      			},
      		},
      		fill: {
      			opacity: 1,
      		},
      		series: [parseInt('{{ success_num }}'), parseInt('{{ fail_num }}')],
      		labels: ["成功", "失败"],
      		grid: {
      			strokeDashArray: 4,
      		},
      		colors: ["#247ce7", "#ff4851"],
      		legend: {
      			show: true,
      			position: 'bottom',
      			offsetY: 12,
      			markers: {
      				width: 10,
      				height: 10,
      				radius: 100,
      			},
      			itemMargin: {
      				horizontal: 8,
      				vertical: 8
      			},
      		},
      		tooltip: {
      			fillSeriesColor: false
      		},
      	})).render();
      });

    $('#run_id_select').on('keyup change', function () {
        window.location.href = '/api_test/automation/自动化任务1/report/'+this.value
    });

    function get_response_content(content) {
        $('#json').text(content)
        //json_viewer('#json',content)
    }
</script>
{% endblock %}