{% extends 'base.html' %}
{% load static %}
{% block title %}SERVER - API MONITOR{% endblock %}
{% block page-title %}API MONITOR{% endblock %}
{% block style %}
{% endblock %}

{% block content %}

<div class="page-body">
    <div class="container-xl">
        <div class="card">
            <ul class="nav nav-tabs nav-tabs-alt" data-bs-toggle="tabs">
                <li class="nav-item">
                    <a href="#tabs-server-monitor" class="nav-link active" data-bs-toggle="tab">
                        <svg t="1636256853250" class="icon me-2" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="17146" width="200" height="200"><path d="M128 128c-23.552 0-42.496 18.944-42.496 42.496v512c0 23.552 18.944 42.496 42.496 42.496h768c23.552 0 42.496-18.944 42.496-42.496v-512c0-23.552-18.944-42.496-42.496-42.496H128z m0-42.496h768c47.104 0 85.504 38.4 85.504 85.504v512c0 47.104-38.4 85.504-85.504 85.504H128c-47.104 0-85.504-38.4-85.504-85.504v-512c0-47.616 38.4-85.504 85.504-85.504z" p-id="17147"></path><path d="M846.336 487.424l-150.528-215.04c-2.56-4.096-4.608-6.656-7.168-9.728-4.608-4.608-9.216-6.656-14.336-6.656-5.12 0-10.24 2.048-14.336 6.656-3.584 4.096-3.584 5.12-7.168 9.728l-177.152 252.928-128-163.84c-8.192-10.24-19.968-10.752-28.16-5.632-4.608 3.072-6.656 5.632-9.728 9.728L167.936 573.44c-8.192 11.776-6.144 21.504 5.632 29.696 11.776 8.192 21.504 6.144 29.696-5.632L330.24 409.6l128.512 164.864c8.704 11.264 21.504 11.264 29.696 3.584 3.072-2.56 7.168-8.704 10.752-13.824l174.08-248.832 137.216 196.096c8.192 11.776 17.92 13.312 29.696 5.12 12.288-7.68 14.336-17.408 6.144-29.184zM149.504 896h725.504c14.336 0 21.504 7.168 21.504 21.504 0 14.336-7.168 21.504-21.504 21.504H149.504c-14.336 0-21.504-7.168-21.504-21.504 0-14.336 7.168-21.504 21.504-21.504z" p-id="17148"></path><path d="M362.496 725.504c14.336 0 21.504 7.168 21.504 21.504v170.496c0 14.336-7.168 21.504-21.504 21.504-14.336 0-21.504-7.168-21.504-21.504v-170.496c0.512-14.336 7.68-21.504 21.504-21.504zM661.504 725.504c14.336 0 21.504 7.168 21.504 21.504v170.496c0 14.336-7.168 21.504-21.504 21.504-14.336 0-21.504-7.168-21.504-21.504v-170.496c0-14.336 7.168-21.504 21.504-21.504z" p-id="17149"></path></svg>
                        服务监控
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#tabs-exception-log" class="nav-link" data-bs-toggle="tab">
                        <svg t="1636253492914" class="icon me-2" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="16258" width="200" height="200"><path d="M311.2 288H682v64H311.2zM311.2 480H682v64H311.2zM311.2 672H682v64H311.2z" fill="#47444F" p-id="16259"></path><path d="M960 512c0-59.4-39.5-109.1-92.7-123.4V192c0-52.9-41.6-96-92.7-96H218.5c-51.1 0-92.7 43.1-92.7 96v160H64v64h61.8v192H64v64h61.8v160c0 52.9 41.6 96 92.7 96h556.1c51.1 0 92.7-43.1 92.7-96V635.4c53.2-14.3 92.7-64 92.7-123.4zM774.6 864H218.5c-17 0-30.9-14.4-30.9-32V672h61.8v-64h-61.8V416h61.8v-64h-61.8V192c0-17.6 13.8-32 30.9-32h556.1c17 0 30.9 14.4 30.9 32v196.6c-53.2 14.3-92.7 64-92.7 123.4s39.5 109.1 92.7 123.4V832c0 17.6-13.8 32-30.9 32z m61.8-288c-34.1 0-61.8-28.7-61.8-64s27.7-64 61.8-64c34.1 0 61.8 28.7 61.8 64s-27.7 64-61.8 64z" fill="#47444F" p-id="16260"></path></svg>
                        异常日志</a>
                </li>

            </ul>
            <div class="card-body">
                <div class="tab-content">
                    <div class="tab-pane active show" id="tabs-server-monitor">
                        <div class="row mb-3">
                            <div class="input-group" style="width: 15%">
                                <div class="input-group-text">项目</div>
                                <select class="select2-selection--single" data-placeholder="Choose one thing">
                                    <option>全部</option>
                                    <option>项目Aaaaaa</option>
                                </select>
                            </div>
                            <div class="input-group ml_15" style="width: 25%">
                                <div class="input-group-text">接口</div>
                                <select class="select2-selection--single" data-placeholder="Choose one thing"  >
                                    <option>全部</option>
                                    <option>user/get_user_info</option>
                                </select>
                            </div>
                        </div>

                        <div class="col-12">
                            <div class="card">
                                <div class="card-header">
                                    <div class='card-title'>接口异常监控</div>
                                </div>
                                <div class="card-body">
                                    <div class="d-flex">
                                        <h3 class="card-title">user/get_user_info</h3>
                                        <div class="ms-auto">
                                            <div class="dropdown">
                                                <a class="dropdown-toggle text-muted" href="#" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">过去24小时</a>
                                                <div class="dropdown-menu dropdown-menu-end">
                                                    <a class="dropdown-item active" href="#">过去24小时</a>
                                                    <a class="dropdown-item" href="#">过去7天</a>
                                                    <a class="dropdown-item" href="#">过去一个月</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div id="chart-social-referrals"></div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 mt-3">
                            <div class="card">
                                <div class="card-header">
                                    <div class='card-title'>接口请求量监控</div>
                                </div>
                                <div class="card-body">
                                    <div class="d-flex">
                                        <h3 class="card-title">user/get_user_info</h3>
                                        <div class="ms-auto">
                                            <div class="dropdown">
                                                <a class="dropdown-toggle text-muted" href="#" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">过去24小时</a>
                                                <div class="dropdown-menu dropdown-menu-end">
                                                    <a class="dropdown-item active" href="#">过去24小时</a>
                                                    <a class="dropdown-item" href="#">过去7天</a>
                                                    <a class="dropdown-item" href="#">过去一个月</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div id="chart-completion-tasks-3"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane" id="tabs-exception-log">
                        <div class="row mb-3">
                            <div class="input-group" style="width: 15%">
                                <div class="input-group-text">项目</div>
                                <select class="select2-selection--single" data-placeholder="Choose one thing">
                                    <option>全部</option>
                                    <option>项目A</option>
                                    <option>项目B</option>
                                </select>
                            </div>
                            <div class="input-group ml_15" style="width: 15%">
                                <div class="input-group-text">等级</div>
                                <select class="select2-selection--single" data-placeholder="Choose one thing" >
                                    <option>全部</option>
                                    <option>ERROR</option>
                                    <option>WORNING</option>
                                </select>
                            </div>
                            <div class="input-group ml_15" style="width: 25%">
                                <div class="input-group-text">接口</div>
                                <select class="select2-selection--single" data-placeholder="Choose one thing"  >
                                    <option>全部</option>
                                    <option>user/get_user_info</option>
                                    <option>user/update_user_info</option>
                                </select>
                            </div>
                            <div class="input-group ml_15" style="width: 20%">
                                <div class="input-group-text">起始日期</div>
                                 <input type="date" class="form-control">
                            </div>
                            <div class="input-group ml_15" style="width: 20%">
                                <div class="input-group-text">最后日期</div>
                                 <input type="date" class="form-control">
                            </div>
                            <div class="col-auto">
                                <a href="#" class="btn btn-white btn-icon" aria-label="Button">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="10" cy="10" r="7" /><line x1="21" y1="21" x2="15" y2="15" /></svg>
                                </a>
                            </div>
                        </div>
                        <table class="table card-table table-vcenter  datatable" >
                            <thead>
                            <tr>
                                <th style="width: 10%;font-size: 13px" class="w-1">No.</th>
                                <th style="width: 15%;font-size: 13px">等级</th>
                                <th style="width: 15%;font-size: 13px">项目</th>
                                <th style="width: 20%;font-size: 13px">接口</th>
                                <th style=";font-size: 13px">日志</th>
                                <th style="width: 20%;font-size: 13px">创建时间</th>
                                <th style="width: 5%"></th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td><span class="text-muted">11</span></td>
                                <td><span class="badge bg-red">ERROR</span></td>
                                <td>项目A</td>
                                <td>user/get_user_info</td>
                                <td  class="log-text">
                                    [svchub@xxxxxxx.com] msg=/sms/send/game/tpsher?__xxxx_service__=&SYS_REMOTE_ADDR=xx.xx.xx.xx&sender=TPSHER&phone=919328710366&code=5813 EOF
                                </td>
                                <td>2021/10/10 12:00</td>
                                <td>
                                    <a data-bs-toggle="modal" data-bs-target="#modal-apkinfo" class="btn btn-white w-100">请求报文</a>
                                </td>
                            </tr>
                            <tr>
                                <td><span class="text-muted">10</span></td>
                                <td><span class="badge bg-yellow">WARNING</span></td>
                                <td>项目B</td>
                                <td>user/update_user_info</td>
                                <td  class="log-text">
                                    [svchub@xxxxxxx.com] msg=/sms/send/game/tpsher?__xxxx_service__=&SYS_REMOTE_ADDR=xx.xx.xx.xx&sender=TPSHER&phone=919328710366&code=5813 EOF
                                </td>
                                <td>2021/10/10 12:00</td>
                                <td>
                                    <a id="apk_info" data-bs-toggle="modal" data-bs-target="#modal-apkinfo" class="btn btn-white w-100">
                                        请求报文
                                    </a>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                        <div class="card-footer d-flex align-items-center">
                <p class="m-0 text-muted">Showing <span>1</span> to <span>8</span> of <span>16</span> entries</p>
                <ul class="pagination m-0 ms-auto">
                    <li class="page-item disabled">
                        <a class="page-link" href="#" tabindex="-1" aria-disabled="true">
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><polyline points="15 6 9 12 15 18" /></svg>
                            prev
                        </a>
                    </li>
                    <!--
                    1、小于等于10全部显示
                    2、大于10（1,2,3,4,5,6,7,8,9,10,11）,1\10一直展示
                     -->
                    <li class="page-item"><a class="page-link" href="#">1</a></li>
                    <li class="page-item active"><a class="page-link" href="#">2</a></li>
                    <li class="page-item"><a class="page-link" href="#">3</a></li>
                    <li class="page-item"><a class="page-link">...</a></li>
                    <li class="page-item"><a class="page-link" href="#">10</a></li>
                    <li class="page-item">
                        <a class="page-link" href="#">
                            next <!-- Download SVG icon from http://tabler-icons.io/i/chevron-right -->
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><polyline points="9 6 15 12 9 18" /></svg>
                        </a>
                    </li>
                </ul>
            </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}



{% block script %}
<script>
      // @formatter:off
      document.addEventListener("DOMContentLoaded", function () {
      	window.ApexCharts && (new ApexCharts(document.getElementById('chart-social-referrals'), {
      		chart: {
      			type: "line",
      			fontFamily: 'inherit',
      			height: 192,
      			parentHeightOffset: 0,
      			toolbar: {
      				show: false,
      			},
      			animations: {
      				enabled: false
      			},
      		},
      		fill: {
      			opacity: 1,
      		},
      		stroke: {
      			width: 2,
      			lineCap: "round",
      			curve: "smooth",
      		},
      		series: [{
      			name: "403",
      			data: [13281, 8521, 15038, 9983, 15417, 8888, 7052, 14270, 5214, 9587, 5950, 16852, 17836, 12217, 17406, 12262, 9147, 14961, 18292, 15230, 13435, 10649, 5140, 13680, 4508, 13271, 13413, 5543, 18727, 18238, 18175, 6246, 5864, 17847, 9170, 6445, 12945, 8142, 8980, 10422, 15535, 11569, 10114, 17621, 16138, 13046, 6652, 9906, 14100, 16495, 6749]
      		},{
      			name: "502",
      			data: [3680, 1862, 3070, 2252, 5348, 3091, 3000, 3984, 5176, 5325, 2420, 5474, 3098, 1893, 3748, 2879, 4197, 5186, 4213, 4334, 2807, 1594, 4863, 2030, 3752, 4856, 5341, 3954, 3461, 3097, 3404, 4949, 2283, 3227, 3630, 2360, 3477, 4675, 1901, 2252, 3347, 2954, 5029, 2079, 2830, 3292, 4578, 3401, 4104, 3749, 4457, 3734]
      		},{
      			name: "503",
      			data: [722, 1866, 961, 1108, 1110, 561, 1753, 1815, 1985, 776, 859, 547, 1488, 766, 702, 621, 1599, 1372, 1620, 963, 759, 764, 739, 789, 1696, 1454, 1842, 734, 551, 1689, 1924, 1875, 908, 1675, 1541, 1953, 534, 502, 1524, 1867, 719, 1472, 1608, 1025, 889, 1150, 654, 1695, 1662, 1285, 1787]
      		}],
      		grid: {
      			padding: {
      				top: -20,
      				right: 0,
      				left: -4,
      				bottom: -4
      			},
      			strokeDashArray: 4,
      			xaxis: {
      				lines: {
      					show: true
      				}
      			},
      		},
      		xaxis: {
      			labels: {
      				padding: 0,
      			},
      			tooltip: {
      				enabled: false
      			},
      			type: 'datetime',
      		},
      		yaxis: {
      			labels: {
      				padding: 4
      			},
      		},
      		labels: [
      			'2020-06-20', '2020-06-21', '2020-06-22', '2020-06-23', '2020-06-24', '2020-06-25', '2020-06-26', '2020-06-27', '2020-06-28', '2020-06-29', '2020-06-30', '2020-07-01', '2020-07-02', '2020-07-03', '2020-07-04', '2020-07-05', '2020-07-06', '2020-07-07', '2020-07-08', '2020-07-09', '2020-07-10', '2020-07-11', '2020-07-12', '2020-07-13', '2020-07-14', '2020-07-15', '2020-07-16', '2020-07-17', '2020-07-18', '2020-07-19', '2020-07-20', '2020-07-21', '2020-07-22', '2020-07-23', '2020-07-24', '2020-07-25', '2020-07-26', '2020-07-27', '2020-07-28', '2020-07-29', '2020-07-30', '2020-07-31', '2020-08-01', '2020-08-02', '2020-08-03', '2020-08-04', '2020-08-05', '2020-08-06', '2020-08-07', '2020-08-08', '2020-08-09'
      		],
      		colors: ["#3b5998", "#1da1f2", "#ea4c89"],
      		legend: {
      			show: true,
      			position: 'bottom',
      			offsetY: 12,
      			markers: {
      				width: 10,
      				height: 10,
      				radius: 100,
      			},
      			itemMargin: {
      				horizontal: 8,
      				vertical: 8
      			},
      		},
      	})).render();
      });
      // @formatter:on
    </script>
<script>
      // @formatter:off
      document.addEventListener("DOMContentLoaded", function () {
      	window.ApexCharts && (new ApexCharts(document.getElementById('chart-completion-tasks-3'), {
      		chart: {
      			type: "area",
      			fontFamily: 'inherit',
      			height: 240,
      			parentHeightOffset: 0,
      			toolbar: {
      				show: false,
      			},
      			animations: {
      				enabled: false
      			},
      		},
      		dataLabels: {
      			enabled: false,
      		},
      		fill: {
      			opacity: .16,
      			type: 'solid'
      		},
      		stroke: {
      			width: 2,
      			lineCap: "round",
      			curve: "smooth",
      		},
      		series: [{
      			name: "Tasks completion",
      			data: [155, 65, 465, 265, 225, 325, 80]
      		}],
      		grid: {
      			padding: {
      				top: -20,
      				right: 0,
      				left: -4,
      				bottom: -4
      			},
      			strokeDashArray: 4,
      		},
      		xaxis: {
      			labels: {
      				padding: 0,
      			},
      			tooltip: {
      				enabled: false
      			},
      			axisBorder: {
      				show: false,
      			},
      			type: 'datetime',
      		},
      		yaxis: {
      			labels: {
      				padding: 4
      			},
      		},
      		labels: [
      			'2020-06-20', '2020-06-21', '2020-06-22', '2020-06-23', '2020-06-24', '2020-06-25', '2020-06-26'
      		],
      		colors: ["#206bc4"],
      		legend: {
      			show: false,
      		},
      	})).render();
      });
      // @formatter:on
    </script>
{% endblock %}
