{% extends 'server_base.html' %}
{% load static %}
{% block title %}SERVER - 服务监控{% endblock %}
{% block page-title %}服务监控{% endblock %}

{% block server_tab %}
<li class="nav-item">
    <a  onclick="tab_click('monitor')" class="nav-link active" data-bs-toggle="tab">
        <svg t="1636256853250" class="icon me-2" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="17146" width="200" height="200"><path d="M128 128c-23.552 0-42.496 18.944-42.496 42.496v512c0 23.552 18.944 42.496 42.496 42.496h768c23.552 0 42.496-18.944 42.496-42.496v-512c0-23.552-18.944-42.496-42.496-42.496H128z m0-42.496h768c47.104 0 85.504 38.4 85.504 85.504v512c0 47.104-38.4 85.504-85.504 85.504H128c-47.104 0-85.504-38.4-85.504-85.504v-512c0-47.616 38.4-85.504 85.504-85.504z" p-id="17147"></path><path d="M846.336 487.424l-150.528-215.04c-2.56-4.096-4.608-6.656-7.168-9.728-4.608-4.608-9.216-6.656-14.336-6.656-5.12 0-10.24 2.048-14.336 6.656-3.584 4.096-3.584 5.12-7.168 9.728l-177.152 252.928-128-163.84c-8.192-10.24-19.968-10.752-28.16-5.632-4.608 3.072-6.656 5.632-9.728 9.728L167.936 573.44c-8.192 11.776-6.144 21.504 5.632 29.696 11.776 8.192 21.504 6.144 29.696-5.632L330.24 409.6l128.512 164.864c8.704 11.264 21.504 11.264 29.696 3.584 3.072-2.56 7.168-8.704 10.752-13.824l174.08-248.832 137.216 196.096c8.192 11.776 17.92 13.312 29.696 5.12 12.288-7.68 14.336-17.408 6.144-29.184zM149.504 896h725.504c14.336 0 21.504 7.168 21.504 21.504 0 14.336-7.168 21.504-21.504 21.504H149.504c-14.336 0-21.504-7.168-21.504-21.504 0-14.336 7.168-21.504 21.504-21.504z" p-id="17148"></path><path d="M362.496 725.504c14.336 0 21.504 7.168 21.504 21.504v170.496c0 14.336-7.168 21.504-21.504 21.504-14.336 0-21.504-7.168-21.504-21.504v-170.496c0.512-14.336 7.68-21.504 21.504-21.504zM661.504 725.504c14.336 0 21.504 7.168 21.504 21.504v170.496c0 14.336-7.168 21.504-21.504 21.504-14.336 0-21.504-7.168-21.504-21.504v-170.496c0-14.336 7.168-21.504 21.504-21.504z" p-id="17149"></path></svg>
        API监控
    </a>
</li>
<li class="nav-item">
    <a  onclick="tab_click('source')" class="nav-link" data-bs-toggle="tab">
        <svg t="1641637366430" class="icon me-2" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2926" width="200" height="200"><path d="M425.13897178 77.6792233H338.27273169V-9.18701678h86.86624009v86.86624008z m-347.45974848 521.18701677H-9.18701678v86.86624011h86.86624008v-86.86624011z m0-130.29675418H-9.18701678v86.8662401h86.86624008V468.56948589z m0-130.2967542H-9.18701678v86.86624009h86.86624008V338.27273169z m0-217.16299426c0-23.93811967 19.46633507-43.43051411 43.43051413-43.43051413h173.73248014V-9.18701678H121.10973743C49.13381039-9.18701678-9.18701678 49.15465787-9.18701678 121.10973743v173.73248015h86.86624008V121.10973743z m477.75129081-130.29675423H468.56948589v86.8662401h86.8662401V-9.18701678z m130.29154231 0h-86.8610282v86.8662401h86.8610282V-9.18701678z m-144.62418526 504.24322688c0-14.14501564-9.2927645-17.22001903-23.41693267-17.22001903h-20.18557317v34.41919059h20.18557317c14.20234621 0 23.41693266-3.00724909 23.41693267-17.19917156zM164.54546339 164.54546339h694.91949695v694.91949695H164.54546339V164.54546339z m436.14493126 373.33147199c0 41.09559627 23.79739918 60.9893047 64.59591886 60.98930472 39.74572188 0 64.72621561-19.85201347 64.72621561-60.98930473V445.40793488h-39.40173847v92.46378863c0 20.73281952-7.00475351 26.80464827-25.32447714 26.80464827-19.21095344 0-25.31926527-9.15725587-25.31926526-26.80464827V445.40793488h-39.27144173v92.46900049z m-142.5967678 57.80485202h39.40173847v-50.94081901h28.75909958c34.22113952 0 53.18713507-20.60252276 53.18713507-49.68997017 0-29.54088009-19.46633507-49.64306334-53.18713507-49.64306334H458.09362685v150.27385252z m-162.36539133-74.52453153c0 43.85788747 28.03464962 77.70898417 73.92516646 77.70898423 35.80033618 0 62.8603661-20.7380314 66.93083669-66.08130188h-38.25512704c-6.40538842 47.62606958-63.19392577 41.81483437-63.19392577-11.62768235 0-24.42803547 9.84001087-44.72305793 34.523428-44.72305788 13.32154017 0 25.02740053 8.05755129 27.48740325 24.8762563h38.25512703c-3.89847888-40.03758663-31.68295875-59.27459943-65.74253028-59.27459943-45.59865209 0.00521188-73.93037834 34.18465643-73.93037834 79.12140101z m650.5873293 34.27847012H1033.18701678V468.56948589h-86.87145196v86.8662401zM77.6792233 902.89026257v-173.7220564H-9.18701678V902.89026257c0 71.93423205 58.32082718 130.29675419 130.29675421 130.29675421h173.73248014v-86.86102821H121.10973743c-23.96417902 0-43.43051411-19.51324191-43.43051413-43.435726z m868.63634152 0c0 23.92248406-19.45591133 43.43572599-43.42530225 43.435726h-173.73248014V1033.18701678H902.89026257c71.98113888 0 130.29675419-58.36252214 130.29675421-130.29675421v-173.7220564h-86.87145196V902.89026257z m0-217.15778239H1033.18701678v-86.86624011h-86.87145196v86.86624011z m0-260.5935084H1033.18701678V338.27273169h-86.87145196v86.86624009zM902.89026257-9.18701678h-173.73248015v86.86624008H902.89026257c23.96939089 0 43.42530224 19.48718255 43.42530225 43.43051413v173.73248014H1033.18701678V121.10973743c0-71.95507954-58.31561531-130.29675419-130.29675421-130.29675421zM338.27273169 1033.18701678h86.86624009v-86.8610282H338.27273169V1033.18701678z m260.58829654 0h86.86102819v-86.8610282h-86.86102819V1033.18701678z m-130.29154234 0h86.8662401v-86.8610282H468.56948589V1033.18701678z" fill="#2c2c2c" p-id="2927"></path></svg>
        资源监控
    </a>
</li>
<li class="nav-item">
    <a  onclick="tab_click('log')" class="nav-link" data-bs-toggle="tab">
        <svg t="1636253492914" class="icon me-2" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="16258" width="200" height="200"><path d="M311.2 288H682v64H311.2zM311.2 480H682v64H311.2zM311.2 672H682v64H311.2z" fill="#47444F" p-id="16259"></path><path d="M960 512c0-59.4-39.5-109.1-92.7-123.4V192c0-52.9-41.6-96-92.7-96H218.5c-51.1 0-92.7 43.1-92.7 96v160H64v64h61.8v192H64v64h61.8v160c0 52.9 41.6 96 92.7 96h556.1c51.1 0 92.7-43.1 92.7-96V635.4c53.2-14.3 92.7-64 92.7-123.4zM774.6 864H218.5c-17 0-30.9-14.4-30.9-32V672h61.8v-64h-61.8V416h61.8v-64h-61.8V192c0-17.6 13.8-32 30.9-32h556.1c17 0 30.9 14.4 30.9 32v196.6c-53.2 14.3-92.7 64-92.7 123.4s39.5 109.1 92.7 123.4V832c0 17.6-13.8 32-30.9 32z m61.8-288c-34.1 0-61.8-28.7-61.8-64s27.7-64 61.8-64c34.1 0 61.8 28.7 61.8 64s-27.7 64-61.8 64z" fill="#47444F" p-id="16260"></path></svg>
        异常日志
    </a>
</li>
{% endblock %}
{% block server_tab_content %}
<div class="tab-pane active show">
    <div class="row mb-3">
        <div class="input-group" style="width: 15%">
            <div class="input-group-text">项目</div>
            <select class="select2-selection--single" data-placeholder="Choose one thing">
                <option>项目A</option>
            </select>
        </div>
        <div class="input-group" style="width: 25%">
            <div class="input-group-text">接口</div>
            <select class="select2-selection--single" data-placeholder="Choose one thing"  >
                <option>user/get_user_info</option>
            </select>
        </div>
    </div>
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <div class='card-title'>接口异常监控</div>
                <div class="ms-auto text-muted">
                    <div class="ms-2 d-inline-block">
                        <a style="cursor: pointer;margin-right: 10px">
                            <svg t="1635427476087" class="icon icon_apk" viewBox="0 0 1194 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="33996" width="200" height="200"><path d="M1094.910175 497.664877c0-104.362493-32.341279-201.386331-87.466521-281.343531-0.853332-1.365331-1.365331-2.815995-2.047996-4.01066a606.718989 606.718989 0 0 0-22.015964-28.159953 34.21861 34.21861 0 0 1-2.389329-3.413328A497.748504 497.748504 0 0 0 795.049342 41.132305l-5.973324-2.559996A599.380334 599.380334 0 0 0 753.83341 25.601664C749.737417 24.236333 745.470758 22.785669 741.204098 21.505671A491.433848 491.433848 0 0 0 709.97215 13.313684C703.998827 12.033687 698.19617 10.497689 692.308179 9.388358c-2.901328-0.511999-5.546657-1.365331-8.533319-1.877331C675.838874 6.145696 668.158886 5.377698 660.137566 4.439033 654.676242 3.8417 649.470918 2.988368 643.92426 2.391036a519.8498 519.8498 0 0 0-39.509267-2.047997C602.025663 0.343039 599.636334 0.001707 597.247005 0.001707a493.311178 493.311178 0 0 0-285.439525 90.026516 59.733234 59.733234 0 1 0 68.693219 97.791837 375.124708 375.124708 0 0 1 252.927579-66.474556c3.413328 0.256 6.570656 0.853332 9.983983 1.279998 8.959985 1.109331 17.91997 2.303996 26.709289 4.181327 3.839994 0.682666 7.679987 1.706664 11.434647 2.559995 8.703985 1.962663 17.237305 4.01066 25.599958 6.485323 2.815995 0.853332 5.375991 1.706664 7.935987 2.730662 9.727984 3.157328 19.199968 6.485323 28.415952 10.410649 1.023998 0.256 1.962663 0.938665 2.901329 1.279998a379.7327 379.7327 0 0 1 143.359761 107.775821 377.002038 377.002038 0 0 1 85.930523 239.6156h-99.7545l159.573067 239.018269L1194.664676 497.75021h-99.754501zM814.334643 807.680361a376.319373 376.319373 0 0 1-221.610298 68.266552c-10.410649-0.256-20.650632-1.023998-30.975948-1.706663l-12.458646-1.706664a317.183471 317.183471 0 0 1-23.893293-3.669327c-4.863992-0.853332-9.727984-2.218663-14.42131-3.413328-7.679987-1.621331-15.359974-3.327994-22.869295-5.546658l-10.495982-3.839993a290.303516 290.303516 0 0 1-25.770624-9.301318l-5.546657-2.303996a643.326928 643.326928 0 0 1-28.927952-13.994643l-1.109332-0.682666a377.770037 377.770037 0 0 1-86.186523-64.597226l-1.279998-1.365331a315.476808 315.476808 0 0 1-26.965288-30.549282 376.319373 376.319373 0 0 1-82.773195-235.519608h99.583834l-159.317068-238.932935L0 497.75021h99.498501c0 104.618492 32.767945 201.642331 88.149186 282.026197 0.682666 1.194665 1.109331 2.559996 1.87733 3.498661 5.717324 8.362653 12.117313 15.871974 18.261303 23.551961 2.389329 2.815995 4.351993 5.631991 6.826656 8.789318a553.897744 553.897744 0 0 0 31.317281 34.21861c33.365278 33.450611 70.997215 61.439898 111.957147 84.053193l3.327994 1.706664c11.77598 6.399989 23.893294 12.28798 36.181273 17.578637l9.045318 4.01066a805.71599 805.71599 0 0 0 47.701254 17.151972c9.471984 2.730662 19.199968 5.119991 29.013285 7.423987 6.570656 1.450664 12.799979 3.157328 19.541301 4.351993 2.730662 0.682666 5.290658 1.535997 7.935987 1.791997 9.386651 1.706664 18.602636 2.559996 27.81862 3.669327 3.413328 0.597332 6.655989 1.194665 9.983983 1.535998a494.079177 494.079177 0 0 0 334.335443-87.637187 59.733234 59.733234 0 0 0-68.437219-97.791837z" fill="#7996F5" p-id="33997"></path></svg>
                        </a>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <div class="d-flex">
                    <h3 class="card-title">user/get_user_info</h3>
                    <div class="ms-auto">
                        <div class="dropdown">
                            <a class="dropdown-toggle text-muted"  data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">过去24小时</a>
                            <div class="dropdown-menu dropdown-menu-end">
                                <a class="dropdown-item active" >过去24小时</a>
                                <a class="dropdown-item" >过去7天</a>
                                <a class="dropdown-item" >过去一个月</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="chart-social-referrals"></div>
            </div>
        </div>
    </div>
    <div class="col-12 mt-3">
        <div class="card">
            <div class="card-header">
                <div class='card-title'>接口请求量监控</div>
                <div class="ms-auto text-muted">
                    <div class="ms-2 d-inline-block">
                        <a style="cursor: pointer;margin-right: 10px">
                            <svg t="1635427476087" class="icon icon_apk" viewBox="0 0 1194 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="33996" width="200" height="200"><path d="M1094.910175 497.664877c0-104.362493-32.341279-201.386331-87.466521-281.343531-0.853332-1.365331-1.365331-2.815995-2.047996-4.01066a606.718989 606.718989 0 0 0-22.015964-28.159953 34.21861 34.21861 0 0 1-2.389329-3.413328A497.748504 497.748504 0 0 0 795.049342 41.132305l-5.973324-2.559996A599.380334 599.380334 0 0 0 753.83341 25.601664C749.737417 24.236333 745.470758 22.785669 741.204098 21.505671A491.433848 491.433848 0 0 0 709.97215 13.313684C703.998827 12.033687 698.19617 10.497689 692.308179 9.388358c-2.901328-0.511999-5.546657-1.365331-8.533319-1.877331C675.838874 6.145696 668.158886 5.377698 660.137566 4.439033 654.676242 3.8417 649.470918 2.988368 643.92426 2.391036a519.8498 519.8498 0 0 0-39.509267-2.047997C602.025663 0.343039 599.636334 0.001707 597.247005 0.001707a493.311178 493.311178 0 0 0-285.439525 90.026516 59.733234 59.733234 0 1 0 68.693219 97.791837 375.124708 375.124708 0 0 1 252.927579-66.474556c3.413328 0.256 6.570656 0.853332 9.983983 1.279998 8.959985 1.109331 17.91997 2.303996 26.709289 4.181327 3.839994 0.682666 7.679987 1.706664 11.434647 2.559995 8.703985 1.962663 17.237305 4.01066 25.599958 6.485323 2.815995 0.853332 5.375991 1.706664 7.935987 2.730662 9.727984 3.157328 19.199968 6.485323 28.415952 10.410649 1.023998 0.256 1.962663 0.938665 2.901329 1.279998a379.7327 379.7327 0 0 1 143.359761 107.775821 377.002038 377.002038 0 0 1 85.930523 239.6156h-99.7545l159.573067 239.018269L1194.664676 497.75021h-99.754501zM814.334643 807.680361a376.319373 376.319373 0 0 1-221.610298 68.266552c-10.410649-0.256-20.650632-1.023998-30.975948-1.706663l-12.458646-1.706664a317.183471 317.183471 0 0 1-23.893293-3.669327c-4.863992-0.853332-9.727984-2.218663-14.42131-3.413328-7.679987-1.621331-15.359974-3.327994-22.869295-5.546658l-10.495982-3.839993a290.303516 290.303516 0 0 1-25.770624-9.301318l-5.546657-2.303996a643.326928 643.326928 0 0 1-28.927952-13.994643l-1.109332-0.682666a377.770037 377.770037 0 0 1-86.186523-64.597226l-1.279998-1.365331a315.476808 315.476808 0 0 1-26.965288-30.549282 376.319373 376.319373 0 0 1-82.773195-235.519608h99.583834l-159.317068-238.932935L0 497.75021h99.498501c0 104.618492 32.767945 201.642331 88.149186 282.026197 0.682666 1.194665 1.109331 2.559996 1.87733 3.498661 5.717324 8.362653 12.117313 15.871974 18.261303 23.551961 2.389329 2.815995 4.351993 5.631991 6.826656 8.789318a553.897744 553.897744 0 0 0 31.317281 34.21861c33.365278 33.450611 70.997215 61.439898 111.957147 84.053193l3.327994 1.706664c11.77598 6.399989 23.893294 12.28798 36.181273 17.578637l9.045318 4.01066a805.71599 805.71599 0 0 0 47.701254 17.151972c9.471984 2.730662 19.199968 5.119991 29.013285 7.423987 6.570656 1.450664 12.799979 3.157328 19.541301 4.351993 2.730662 0.682666 5.290658 1.535997 7.935987 1.791997 9.386651 1.706664 18.602636 2.559996 27.81862 3.669327 3.413328 0.597332 6.655989 1.194665 9.983983 1.535998a494.079177 494.079177 0 0 0 334.335443-87.637187 59.733234 59.733234 0 0 0-68.437219-97.791837z" fill="#7996F5" p-id="33997"></path></svg>
                        </a>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <div class="d-flex">
                    <h3 class="card-title">user/get_user_info</h3>
                    <div class="ms-auto">
                        <div class="dropdown">
                            <a class="dropdown-toggle text-muted"  data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">过去24小时</a>
                            <div class="dropdown-menu dropdown-menu-end">
                                <a class="dropdown-item active" >过去24小时</a>
                                <a class="dropdown-item" >过去7天</a>
                                <a class="dropdown-item" >过去一个月</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="chart-completion-tasks-3"></div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block server_script %}
<script>
      // @formatter:off
      document.addEventListener("DOMContentLoaded", function () {
      	window.ApexCharts && (new ApexCharts(document.getElementById('chart-social-referrals'), {
      		chart: {
      			type: "line",
      			fontFamily: 'inherit',
      			height: 192,
      			parentHeightOffset: 0,
      			toolbar: {
      				show: false,
      			},
      			animations: {
      				enabled: false
      			},
      		},
      		fill: {
      			opacity: 1,
      		},
      		stroke: {
      			width: 2,
      			lineCap: "round",
      			curve: "smooth",
      		},
      		series: [{
      			name: "403",
      			data: [13281, 8521, 15038, 9983, 15417, 8888, 7052, 14270, 5214, 9587, 5950, 16852, 17836, 12217, 17406, 12262, 9147, 14961, 18292, 15230, 13435, 10649, 5140, 13680,9000]
      		},{
      			name: "502",
      			data: [3680, 1862, 3070, 2252, 5348, 3091, 3000, 3984, 5176, 5325, 2420, 5474, 3098, 1893, 3748, 2879, 4197, 5186, 4213, 4334, 2807, 1594, 4863, 2030, 3752]
      		},{
      			name: "503",
      			data: [722, 1866, 961, 1108, 1110, 561, 1753, 1815, 1985, 776, 859, 547, 1488, 766, 702, 621, 1599, 1372, 1620, 963, 759, 764, 739, 789,800]
      		}],
      		grid: {
      			padding: {
      				top: -20,
      				right: 0,
      				left: -4,
      				bottom: -4
      			},
      			strokeDashArray: 4,
      			xaxis: {
      				lines: {
      					show: true
      				}
      			},
      		},
      		xaxis: {
      			labels: {
      				padding: 0,
      			},
      			tooltip: {
      				enabled: false
      			},
      			type: 'time',
      		},
      		yaxis: {
      			labels: {
      				padding: 4
      			},
      		},
      		labels: [
      			'00:00', '01:00', '02:00', '03:00', '04:00', '05:00', '06:00', '07:00', '08:00', '09:00', '10:00',
                '11:00', '12:00', '13:00', '14:00', '15:00', '16:00', '17:00', '18:00', '19:00', '20:00', '21:00',
                '22:00', '23:00', '24:00'
      		],
      		colors: ["#3b5998", "#1da1f2", "#ea4c89"],
      		legend: {
      			show: true,
      			position: 'bottom',
      			offsetY: 12,
      			markers: {
      				width: 10,
      				height: 10,
      				radius: 100,
      			},
      			itemMargin: {
      				horizontal: 8,
      				vertical: 8
      			},
      		},
      	})).render();
      });
      // @formatter:on
    </script>
<script>
      // @formatter:off
      document.addEventListener("DOMContentLoaded", function () {
      	window.ApexCharts && (new ApexCharts(document.getElementById('chart-completion-tasks-3'), {
      		chart: {
      			type: "area",
      			fontFamily: 'inherit',
      			height: 240,
      			parentHeightOffset: 0,
      			toolbar: {
      				show: false,
      			},
      			animations: {
      				enabled: false
      			},
      		},
      		dataLabels: {
      			enabled: false,
      		},
      		fill: {
      			opacity: .16,
      			type: 'solid'
      		},
      		stroke: {
      			width: 2,
      			lineCap: "round",
      			curve: "smooth",
      		},
      		series: [{
      			name: "Tasks completion",
      			data: [155, 65, 465, 265, 225, 325, 80]
      		}],
      		grid: {
      			padding: {
      				top: -20,
      				right: 0,
      				left: -4,
      				bottom: -4
      			},
      			strokeDashArray: 4,
      		},
      		xaxis: {
      			labels: {
      				padding: 0,
      			},
      			tooltip: {
      				enabled: false
      			},
      			axisBorder: {
      				show: false,
      			},
      			type: 'datetime',
      		},
      		yaxis: {
      			labels: {
      				padding: 4
      			},
      		},
      		labels: [
      			'2020-06-20', '2020-06-21', '2020-06-22', '2020-06-23', '2020-06-24', '2020-06-25', '2020-06-26'
      		],
      		colors: ["#206bc4"],
      		legend: {
      			show: false,
      		},
      	})).render();
      });
      // @formatter:on
    </script>
{% endblock %}
