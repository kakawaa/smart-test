{% extends 'apm_base.html' %}
{% block title %}APM - 性能测试{% endblock %}
{% block page-title %}性能测试{% endblock %}

{% block apm_tab %}
<li class="nav-item">
    <a href="#" onclick="tab_click('test')" class="nav-link active" data-bs-toggle="tab">
        <svg t="1638089656435" class="icon me-2" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="181509" width="200" height="200"><path d="M1024 64v896H0V64h1024zM64 672V896h896v-224h-269.952l-115.136 192-162.944-293.312L336 672H64zM960 128H64v192h896V128zM320 192v64H128V192h192z m192 0v64H384V192h128z m128 0v64H576V192h64zM64 608h240l116.032-154.688L577.024 736l76.8-128H960V384H64v224z" p-id="181510"></path></svg>
        性能测试
    </a>
</li>
<li class="nav-item">
    <a href="#" onclick="tab_click('report')" class="nav-link" data-bs-toggle="tab">
        <svg t="1638089683105" class="icon me-2" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="182427" width="200" height="200"><path d="M219.428571 73.142857h585.142858a146.285714 146.285714 0 0 1 146.285714 146.285714v438.857143a146.285714 146.285714 0 0 1-146.285714 146.285715H219.428571a146.285714 146.285714 0 0 1-146.285714-146.285715V219.428571a146.285714 146.285714 0 0 1 146.285714-146.285714z m410.624 297.618286l-155.172571 155.136-103.424-103.424a36.461714 36.461714 0 0 0-51.712 0l-129.316571 129.316571a36.571429 36.571429 0 0 0 51.712 51.712l103.460571-103.460571 102.948571 102.985143a36.461714 36.461714 0 0 0 52.187429 0.475428l181.028571-181.028571 48.237715 48.237714a36.571429 36.571429 0 0 0 62.281143-22.564571l14.811428-162.998857a36.571429 36.571429 0 0 0-39.716571-39.716572l-162.998857 14.811429a36.571429 36.571429 0 0 0-22.564572 62.281143l48.237714 48.237714zM219.428571 877.714286h585.142858a36.571429 36.571429 0 0 1 0 73.142857H219.428571a36.571429 36.571429 0 0 1 0-73.142857z" p-id="182428"></path></svg>
        云端报告
    </a>
</li>
{% endblock %}

{% block apm_tab_content %}
<div class="tab-pane active">
    <div class="row mb-3" >
        <div class="input-group" style="width: 20%">
            <div class="input-group-text">
                <svg t="1638090687049" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="186695" width="200" height="200"><path d="M213.33 128.002c-11.782 0-21.328 9.546-21.328 21.328v42.672c0 11.782 9.546 21.328 21.328 21.328s21.344-9.546 21.344-21.328V149.33c0-11.782-9.562-21.328-21.344-21.328zM213.33 234.674c-11.782 0-21.328 9.546-21.328 21.328v85.328c0 11.782 9.546 21.344 21.328 21.344s21.344-9.562 21.344-21.344v-85.328c0-11.782-9.562-21.328-21.344-21.328zM213.33 384.002c-11.782 0-21.328 9.546-21.328 21.326v85.344c0 11.782 9.546 21.328 21.328 21.328s21.344-9.546 21.344-21.328v-85.344c0-11.78-9.562-21.326-21.344-21.326z" fill="#434A54" p-id="186696"></path><path d="M810.686 256.002c-11.812 0-21.376 9.546-21.376 21.328v85.344c0 11.782 9.562 21.328 21.376 21.328 11.75 0 21.312-9.546 21.312-21.328v-85.344c0-11.782-9.562-21.328-21.312-21.328zM298.674 1002.652c-35.296 0-64-28.688-64-63.998V85.33c0-35.28 28.704-63.998 64-63.998h426.636c35.312 0 64 28.718 64 63.998v853.324c0 35.31-28.688 63.998-64 63.998H298.674z" fill="#434A54" p-id="186697"></path><path d="M234.674 149.33h554.636v682.668H234.674z" fill="#5D9CEC" p-id="186698"></path><path d="M725.31 0.004H298.674c-47.14 0-85.344 38.204-85.344 85.326v853.324c0 47.124 38.204 85.342 85.344 85.342h426.636c47.156 0 85.376-38.218 85.376-85.342V85.33c0-47.122-38.22-85.326-85.376-85.326z m64 938.65c0 35.31-28.688 63.998-64 63.998H298.674c-35.296 0-64-28.688-64-63.998V85.33c0-35.28 28.704-63.998 64-63.998h426.636c35.312 0 64 28.718 64 63.998v853.324z" fill="#656D78" p-id="186699"></path><path d="M512 853.342c-35.344 0-64 28.656-64 64s28.656 63.998 64 63.998c35.342 0 64-28.654 64-63.998s-28.656-64-64-64z m0 85.312c-11.766 0-21.328-9.562-21.328-21.312 0-11.782 9.562-21.344 21.328-21.344 11.764 0 21.328 9.562 21.328 21.344 0 11.75-9.562 21.312-21.328 21.312z" fill="#656D78" p-id="186700"></path><path d="M426.672 85.33c0 11.782-9.562 21.344-21.344 21.344S384 97.112 384 85.33s9.546-21.328 21.328-21.328 21.344 9.546 21.344 21.328z" fill="#5D9CEC" p-id="186701"></path><path d="M554.688 64.002h-85.358c-11.782 0-21.328 9.546-21.328 21.328s9.546 21.344 21.328 21.344h85.358c11.75 0 21.312-9.562 21.312-21.344s-9.562-21.328-21.312-21.328z" opacity=".2" p-id="186702"></path><path d="M509.33 832.216h-122.658l128.002-682.886h122.638z" fill="#FFFFFF" opacity=".1" p-id="186703"></path></svg>
            </div>
            <select class="select2-selection--single" data-placeholder="请选择设备">
                <option>华为mate20</option>
            </select>
        </div>
        <div class="input-group" style="width: 20%">
            <div class="input-group-text">
                <svg t="1638091033956" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="199171" width="200" height="200"><path d="M364.8 396.8m-25.6 0a25.6 25.6 0 1 0 51.2 0 25.6 25.6 0 1 0-51.2 0Z" fill="#3ED214" p-id="199172"></path><path d="M499.2 396.8m-25.6 0a25.6 25.6 0 1 0 51.2 0 25.6 25.6 0 1 0-51.2 0Z" fill="#3ED214" p-id="199173"></path><path d="M569.6 531.2m-19.2 0a19.2 19.2 0 1 0 38.4 0 19.2 19.2 0 1 0-38.4 0Z" fill="#3ED214" p-id="199174"></path><path d="M678.4 531.2m-19.2 0a19.2 19.2 0 1 0 38.4 0 19.2 19.2 0 1 0-38.4 0Z" fill="#3ED214" p-id="199175"></path><path d="M806.4 0H217.6C102.4 0 0 102.4 0 217.6v582.4C0 921.6 102.4 1024 217.6 1024h582.4c121.6 0 217.6-102.4 217.6-217.6V217.6C1024 102.4 921.6 0 806.4 0zM428.8 620.8c-25.6 0-44.8-6.4-70.4-12.8l-70.4 32 19.2-57.6c-44.8-32-70.4-76.8-70.4-128 0-96 89.6-166.4 192-166.4 96 0 179.2 57.6 198.4 134.4h-19.2C518.4 422.4 441.6 492.8 441.6 576c0 12.8 0 25.6 6.4 38.4-6.4 6.4-12.8 6.4-19.2 6.4z m288 70.4l12.8 51.2-51.2-32c-19.2 6.4-38.4 12.8-57.6 12.8-96 0-166.4-64-166.4-140.8 0-76.8 70.4-140.8 166.4-140.8 89.6 0 166.4 64 166.4 140.8 0 38.4-25.6 76.8-70.4 108.8z" fill="#3ED214" p-id="199176"></path></svg>
            </div>
            <select class="select2-selection--single" data-placeholder="请选择APP">
                <option>WeChat</option>
            </select>
        </div>
        <div class="col-auto">
            <a href="#" class="btn btn-default">
                <svg t="1638091545450" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="231707" width="200" height="200"><path d="M207.67511 241.617978v295.694382c0 15.532584 4.602247 31.065169 13.231461 43.721348L296.268369 676.530337c13.806742 20.134831 36.242697 32.21573 60.404494 32.21573h109.303371c24.161798 0 46.597753-12.080899 60.404494-32.21573L601.742526 581.033708c8.629213-12.65618 13.231461-28.188764 13.231461-43.721348V241.617978H207.67511z" fill="#4988FD" p-id="231708"></path><path d="M253.122301 4.026966h317.555056V241.617978H253.122301z" fill="#C5DCFA" p-id="231709"></path><path d="M344.016683 184.089888c-9.204494 0-16.683146-7.478652-16.683146-16.683146V83.41573c0-9.204494 7.478652-16.683146 16.683146-16.683146 9.204494 0 16.683146 7.478652 16.683146 16.683146v83.991012c0 9.204494-7.478652 16.683146-16.683146 16.683146zM476.906571 184.089888c-9.204494 0-16.683146-7.478652-16.683146-16.683146V83.41573c0-9.204494 7.478652-16.683146 16.683146-16.683146 9.204494 0 16.683146 7.478652 16.683146 16.683146v83.991012c0 9.204494-7.478652 16.683146-16.683146 16.683146z" fill="#FFFFFF" p-id="231710"></path><path d="M606.344773 1023.424719c-118.507865 0-214.579775-96.07191-214.579775-214.579775v-28.188764c0-12.080899 9.779775-21.860674 21.860674-21.860674 12.080899 0 21.860674 9.779775 21.860674 21.860674v28.188764c0 93.770787 76.51236 170.283146 170.283146 170.283146s170.283146-76.51236 170.283146-170.283146v-231.262922c0-12.080899 9.779775-21.860674 21.860674-21.860674 12.080899 0 21.860674 9.779775 21.860675 21.860674v231.262922c0.575281 118.507865-95.496629 214.579775-213.429214 214.579775z" fill="#C5DCFA" p-id="231711"></path><path d="M439.513312 780.65618h-52.925842c-12.65618 0-23.011236-10.355056-23.011236-23.011236v-48.898877h98.373033v48.898877c0.575281 12.65618-9.779775 23.011236-22.435955 23.011236z" fill="#2767F4" p-id="231712"></path><path d="M411.899829 604.620225c-9.204494 0-16.683146-7.478652-16.683146-16.683146V335.388764c0-9.204494 7.478652-16.683146 16.683146-16.683146 9.204494 0 16.683146 7.478652 16.683146 16.683146v252.548315c-0.575281 9.779775-7.478652 16.683146-16.683146 16.683146z" fill="#FFFFFF" p-id="231713"></path><path d="M411.899829 528.683146c-3.451685 0-7.478652-1.150562-10.355056-4.026966l-65.582022-54.651686c-4.026966-2.876404-5.752809-8.053933-5.752809-12.656179v-54.076405c0-9.204494 7.478652-16.683146 16.683146-16.683146 9.204494 0 16.683146 7.478652 16.683146 16.683146v46.597753L422.830166 499.34382c6.903371 5.752809 8.053933 16.107865 2.301124 23.586517-4.026966 4.026966-8.629213 5.752809-13.231461 5.752809z" fill="#FFFFFF" p-id="231714"></path><path d="M411.899829 480.934831c-4.602247 0-9.204494-1.725843-12.65618-5.752809-5.752809-6.903371-5.177528-17.258427 1.725843-23.586516l60.979775-51.775281V362.426966c0-9.204494 7.478652-16.683146 16.683146-16.683146 9.204494 0 16.683146 7.478652 16.683147 16.683146v44.87191c0 4.602247-2.301124 9.204494-5.752809 12.65618L422.830166 476.907865c-3.451685 2.876404-7.478652 4.026966-10.930337 4.026966z" fill="#FFFFFF" p-id="231715"></path></svg>
                测试连接
            </a>
            <a href="#" class="btn btn-default" style="margin-left: 10px">
                <svg t="1638001356313" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="73544" width="200" height="200"><path d="M511.488 511.488m-511.488 0a511.488 511.488 0 1 0 1022.976 0 511.488 511.488 0 1 0-1022.976 0Z" fill="#E0E2E1" p-id="73545"></path><path d="M766.464 560.64c27.136-18.944 34.304-56.32 15.36-83.456-4.096-6.144-9.216-11.264-15.36-15.36l-318.464-219.136c-27.136-18.944-65.024-11.776-83.456 15.36-6.656 10.24-10.752 22.016-10.752 34.304v438.272c0 33.28 27.136 60.416 59.904 60.416 12.288 0 24.064-3.584 34.304-10.752l318.464-219.648z" fill="#1AAA5E" p-id="73546"></path></svg>
                执行
            </a>
            <a href="#" class="btn btn-default" style="margin-left: 10px">
                <svg t="1638096947956" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="235254" width="200" height="200"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#EE827F" p-id="235255"></path><path d="M512 512m-443.191534 0a443.191534 443.191534 0 1 0 886.383068 0 443.191534 443.191534 0 1 0-886.383068 0Z" fill="#E64537" p-id="235256"></path><path d="M0 512C0 794.638448 229.180952 1023.8194 512 1023.8194V0C229.180952 0 0 229.180952 0 512z" fill="#FEFFFF" opacity=".1" p-id="235257"></path><path d="M477.866667 683.208466H375.647266c-1.083598 0-1.986596-0.902998-1.986596-1.986597V342.597531c0-1.083598 0.902998-1.986596 1.986596-1.986596h102.4c1.083598 0 1.986596 0.902998 1.986596 1.986596v338.443739c-0.1806 1.264198-1.083598 2.167196-2.167195 2.167196zM648.352734 683.208466h-102.4c-1.083598 0-1.986596-0.902998-1.986596-1.986597V342.597531c0-1.083598 0.902998-1.986596 1.986596-1.986596H648.352734c1.083598 0 1.986596 0.902998 1.986596 1.986596v338.443739c0 1.264198-0.902998 2.167196-1.986596 2.167196z" fill="#FFFFFF" p-id="235258"></path></svg>
                停止
            </a>
        </div>
    </div>
    <div class="card">
        <div id="cpu" style="min-width:400px;height:300px"></div>
    </div>
    <div class="card mt-3">
        <div id="mem"  style="min-width:400px;height:300px"></div>
    </div>
    <div class="card mt-3">
        <div id="fps" style="min-width:400px;height:300px"></div>
    </div>

</div>
{% endblock %}
{% block api_script %}
<script src="https://cdn.highcharts.com.cn/highcharts/highcharts.js"></script>
<script src="https://img.hcharts.cn/highcharts-plugins/highcharts-zh_CN.js"></script>
<script src="https://code.highcharts.com.cn/highcharts/themes/gray.js"></script>
<script>
    Highcharts.setOptions({
		global: {
            useUTC: false
		}
    });
    function activeLastPointToolip(chart) {
        var points = chart.series[0].points;
		chart.tooltip.refresh(points[points.length -1]);
    }

    var chart_cpu = Highcharts.chart('cpu', {
		chart: {
				type: 'spline',
				marginRight: 1,
				events: {
						load: function () {
								var series = this.series[0],
										chart = this;
								activeLastPointToolip(chart);
								setInterval(function () {
										var x = (new Date()).getTime(), // 当前时间
												y = Math.random();          // 随机值
										series.addPoint([x, y], true, true);
										activeLastPointToolip(chart);
								}, 1000);
						}
				}
		},
		title: {
				text: 'CPU（KB/S）'
		},
		xAxis: {
				type: 'datetime',
				tickPixelInterval: 1
		},
		yAxis: {
				title: {
						text: ''
				}
		},
		tooltip: {
				formatter: function () {
						return '<b>' + this.series.name + '</b><br/>' +
								Highcharts.dateFormat('%Y-%m-%d %H:%M:%S', this.x) + '<br/>' +
								Highcharts.numberFormat(this.y, 2);
				}
		},
		legend: {
				enabled: true
		},
		series: [{
				name: '',
				data: (function () {
						// 生成随机值
						var data = [],
								time = (new Date()).getTime(),
								i;
						for (i = -100; i <= 0; i += 1) {
								data.push({
										x: time + i * 1000,
										y: Math.random()
								});
						}
						return data;
				}())
		}]
    });
    var chart_mem = Highcharts.chart('mem', {
		chart: {
				type: 'spline',
				marginRight: 1,
				events: {
						load: function () {
								var series = this.series[0],
										chart = this;
								activeLastPointToolip(chart);
								setInterval(function () {
										var x = (new Date()).getTime(), // 当前时间
												y = Math.random();          // 随机值
										series.addPoint([x, y], true, true);
										activeLastPointToolip(chart);
								}, 1000);
						}
				}
		},
		title: {
				text: '内存（KB/S）'
		},
		xAxis: {
				type: 'datetime',
				tickPixelInterval: 1
		},
		yAxis: {
				title: {
						text: ''
				}
		},
		tooltip: {
				formatter: function () {
						return '<b>' + this.series.name + '</b><br/>' +
								Highcharts.dateFormat('%Y-%m-%d %H:%M:%S', this.x) + '<br/>' +
								Highcharts.numberFormat(this.y, 2);
				}
		},
		legend: {
				enabled: true
		},
		series: [{
				name: '',
				data: (function () {
						// 生成随机值
						var data = [],
								time = (new Date()).getTime(),
								i;
						for (i = -100; i <= 0; i += 1) {
								data.push({
										x: time + i * 1000,
										y: Math.random()
								});
						}
						return data;
				}())
		}]
    });
    var chart_fps = Highcharts.chart('fps', {
		chart: {
				type: 'spline',
				marginRight: 1,
				events: {
						load: function () {
								var series = this.series[0],
										chart = this;
								activeLastPointToolip(chart);
								setInterval(function () {
										var x = (new Date()).getTime(), // 当前时间
												y = Math.random();          // 随机值
										series.addPoint([x, y], true, true);
										activeLastPointToolip(chart);
								}, 1000);
						}
				}
		},
		title: {
				text: '流畅度（HZ/S）'
		},
		xAxis: {
				type: 'datetime',
				tickPixelInterval: 1
		},
		yAxis: {
				title: {
						text: ''
				}
		},
		tooltip: {
				formatter: function () {
						return '<b>' + this.series.name + '</b><br/>' +
								Highcharts.dateFormat('%Y-%m-%d %H:%M:%S', this.x) + '<br/>' +
								Highcharts.numberFormat(this.y, 2);
				}
		},
		legend: {
				enabled: true
		},
		series: [{
				name: '',
				data: (function () {
						// 生成随机值
						var data = [],
								time = (new Date()).getTime(),
								i;
						for (i = -100; i <= 0; i += 1) {
								data.push({
										x: time + i * 1000,
										y: Math.random()
								});
						}
						return data;
				}())
		}]
    });
</script>
{% endblock %}
